"use strict";(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[730],{6886:(D,h,t)=>{t.d(h,{Dw:()=>L,a7:()=>A});var l=t(655),p=t(43),f=t(805),r=t(1956),S=t(1442),g=t(5669),I=t(316),C=t(5897);class A extends C.D{constructor(){super(...arguments),this.id=void 0,this.descricao="",this.empresa_Id=void 0,this.tipoAtivo_Id=void 0,this.tipoAtivo=new S.m,this.tipoRisco_Id=void 0,this.tipoRisco=new I.p,this.tipoLiquidez_Id=void 0,this.tipoLiquidez=new g.T,this.registroNaoSalvo=!1}}(0,l.gn)([(0,p.Vp)(),(0,l.w6)("design:type",Boolean)],A.prototype,"registroNaoSalvo",void 0);var L=[{field:"id",header:"Id",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS},{field:"descricao",header:"Nome",maskType:r.O.substring,substringLength:22,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS},{field:"tipoAtivo.nome",header:"Ativo",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"tipoRisco.nome",header:"Risco",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"tipoLiquidez.nome",header:"Liquidez",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"ativo",header:"Ativo",maskType:r.O.boolean,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS,booleanValues:{true:"ativo",false:"inativo"}}]},1442:(D,h,t)=>{t.d(h,{m:()=>l});class l{constructor(){this.id=void 0,this.nome=""}}},5669:(D,h,t)=>{t.d(h,{T:()=>l});class l{constructor(){this.id=void 0,this.nome=""}}},316:(D,h,t)=>{t.d(h,{p:()=>l});class l{constructor(){this.id=void 0,this.nome="",this.percentualDisponivel=0}}},9179:(D,h,t)=>{t.r(h),t.d(h,{ProdutosModule:()=>n});var l=t(6895),p=t(202),f=t(8446),r=t(4163),S=t(9899),g=t(343),I=t(5861),C=t(801),A=t(9808),b=t(9398),L=t(6886),R=t(9876),y=t(8913),m=t(9885),U=t(46),o=t(4650),W=t(453),P=t(8944),B=t(3868);function e(i,_){1&i&&o._UZ(0,"app-empresa-select")}const s=function(){return["cadastrar"]},a=[{path:"",component:(()=>{class i{constructor(d,v,K,x){var N=this;this.empresaService=d,this.produtoService=v,this.table=K,this.accountService=x,this.faHandHoldingDollar=C.VPG,this.empresaSelected=new b.oW,this.columns=L.Dw,this.list=[],this.tableLinks=[],this.subscription=[],this.create=(c=this.produtoService)=>{c.setObject(new L.a7)};var z=this.accountService.account.subscribe(c=>this.account=c),F=this.produtoService.list.subscribe(c=>{this.list=c,this.list.filter(O=>61==O.id).forEach(O=>{O.showMenuOption=!1,O.canSelect=!1})});this.table.currentPage.next(1);var j=this.empresaService.empresa.subscribe(function(){var c=(0,I.Z)(function*(O){N.empresaSelected=O,0!=O.id&&(yield(0,A.n)(N.produtoService.getList()))});return function(O){return c.apply(this,arguments)}}()),Z=this.table.selected.subscribe(c=>{c&&"Conta Corrente"!=c.descricao?(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:c.ativo?"Desabilitar":"Habilitar",routePath:[c.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks)):c&&"Conta Corrente"!=c.descricao?this.table.onRowUnselect(c):this.tableLinks=[]});this.subscription.push(z),this.subscription.push(F),this.subscription.push(j),this.subscription.push(Z)}ngOnDestroy(){this.subscription.forEach(d=>d.unsubscribe())}}return i.\u0275fac=function(d){return new(d||i)(o.Y36(y.P),o.Y36(m.m),o.Y36(U.i),o.Y36(R.B))},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-list-produtos"]],decls:17,vars:16,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__header-subtitle"],[1,"ml-auto","mb-0","col-xl-3","col-lg-4","col-md-5","col-sm-5","col-12","px-0"],[4,"ngIf"],[1,"page__body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"]],template:function(d,v){1&d&&(o.TgZ(0,"div",0)(1,"div",1)(2,"span",2),o._UZ(3,"fa-icon",3),o.qZA(),o.TgZ(4,"div",4)(5,"h3",5),o._uU(6,"Produtos"),o.qZA(),o.TgZ(7,"p",6)(8,"small"),o._uU(9,"Produtos cadastrados em "),o.TgZ(10,"strong"),o._uU(11),o.qZA()()()(),o.TgZ(12,"div",7),o.YNc(13,e,1,0,"app-empresa-select",8),o.qZA()(),o.TgZ(14,"div",9),o._UZ(15,"app-list-shared",10),o.qZA()(),o._UZ(16,"router-outlet")),2&d&&(o.xp6(3),o.Q6J("icon",v.faHandHoldingDollar),o.xp6(8),o.Oqu(v.empresaSelected.nome),o.xp6(2),o.Q6J("ngIf",v.account&&1==v.account.perfilAcesso_Id),o.xp6(2),o.Q6J("createLink",o.DdM(15,s))("onCreate",v.create)("canCreate",!0)("list",v.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",v.columns)("tableLinks",v.tableLinks)("selectable",!0))},dependencies:[l.O5,p.lC,W.o,P.l,B.BN]}),i})(),children:[{path:"cadastrar",component:f.G,title:"Planner - Cadastrar produto"},{path:"editar/:produto_id",component:g.F,title:"Planner - Editar produto"},{path:"excluir/:produto_id",component:S.T,title:"Planner - Excluir produto"},{path:"habilitar/:produto_id",component:r.T,title:"Planner - Habilitar produto"},{path:"desabilitar/:produto_id",component:r.T,title:"Planner - Desabilitar produto "}]}];let E=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275mod=o.oAB({type:i}),i.\u0275inj=o.cJS({imports:[p.Bz.forChild(a),p.Bz]}),i})(),M=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275cmp=o.Xpm({type:i,selectors:[["app-produtos"]],decls:1,vars:0,template:function(d,v){1&d&&o._UZ(0,"router-outlet")},dependencies:[p.lC]}),i})();var T=t(7864);let n=(()=>{class i{}return i.\u0275fac=function(d){return new(d||i)},i.\u0275mod=o.oAB({type:i,bootstrap:[M]}),i.\u0275inj=o.cJS({imports:[l.ez,E,T.m,B.uH]}),i})()},9885:(D,h,t)=>{t.d(h,{m:()=>W});var l=t(529),p=t(1135),f=t(4004),r=t(9243),S=t(2340),g=t(9535),I=t(9398),C=t(8913),A=t(46),b=t(6886),L=t(1685),R=t(9876),y=t(4409),m=t(4650),U=t(202),o=t(7185);let W=(()=>{class P{constructor(e,s,u,a,E,M,T,n){this.router=e,this.table=s,this.http=u,this.toastr=a,this.crypto=E,this.dropdownService=M,this.empresaService=T,this.accountService=n,this.url=S.N.url,this.list=new p.X([]),this.objeto=new p.X(void 0),this.carteiraSetup=new p.X([]),this.empresa=new I.oW,this.account=new L.mR,this.empresa=this.empresaService.object,this.empresaService.empresa.subscribe(i=>this.empresa=i),this.accountService.account.subscribe(i=>this.account=i??new L.mR)}getObject(){var e=localStorage.getItem("produto");return e&&this.setObject(this.crypto.decrypt(e)??new b.a7),this.objeto}setObject(e){localStorage.setItem("produto",this.crypto.encrypt(e)??""),this.objeto.next(e)}add_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let a=this.dropdownService.tipoAtivo.value.find(n=>n.id==e.tipoAtivo_Id);if(!a)return this.toastr.error("Selecione um tipo de ativo v\xe1lido!!"),!1;e.tipoAtivo=a;let E=this.dropdownService.tipoRisco.value.find(n=>n.id==e.tipoRisco_Id);if(!E)return this.toastr.error("Selecione um tipo de risco v\xe1lido!!"),!1;e.tipoRisco=E;let M=this.dropdownService.tipoLiquidez.value.find(n=>n.id==e.tipoLiquidez_Id);if(!M)return this.toastr.error("Selecione um tipo de liquidez v\xe1lido!!"),!1;e.tipoLiquidez=M,s.sort((n,i)=>n.id-i.id);var u=0==s.length?0:s[s.length-1].id;e.id=++u,e.registroNaoSalvo=!0;let T=Object.assign({},e);return s.push(T),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"add_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),this.table.resetSelection(),!0}return this.toastr.error("Nenhuma empresa selecionada."),!1}edit_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let u=s.findIndex(a=>a.id==e.id);if(-1!=u){let a=this.dropdownService.tipoAtivo.value.find(n=>n.id==e.tipoAtivo_Id);if(!a)return this.toastr.error("Selecione um tipo de ativo v\xe1lido!!"),!1;e.tipoAtivo=a;let E=this.dropdownService.tipoRisco.value.find(n=>n.id==e.tipoRisco_Id);if(!E)return this.toastr.error("Selecione um tipo de risco v\xe1lido!!"),!1;e.tipoRisco=E;let M=this.dropdownService.tipoLiquidez.value.find(n=>n.id==e.tipoLiquidez_Id);if(!M)return this.toastr.error("Selecione um tipo de liquidez v\xe1lido!!"),!1;e.tipoLiquidez=M;let T=Object.assign({},e);return s.splice(u,1,T),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"edit_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),!0}return this.toastr.error("Produto n\xe3o encontrado!!"),!1}return this.toastr.error("Nenhuma empresa selecionada."),!1}delete_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let u=s.findIndex(a=>a.id==e);return-1!=u?(s.splice(u,1),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"delete_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),this.table.resetSelection(),!0):(this.toastr.error("Produto n\xe3o encontrado!!"),!1)}return this.toastr.error("Nenhuma empresa selecionada."),!1}getList(e,s){return this.table.loading.next(!0),this.http.get(`${this.url}/produto/all/${e=e??(this.account.perfilAcesso_Id!=y.u.Admin?this.account.empresa_Id:this.empresa.id)}/${s=s??""}`,{headers:new l.WM({loading:"false"})}).pipe((0,f.U)(u=>(u=u.map(a=>(a.ativo=!a.dataDesativado,a)),this.list.next(u),u)))}get(e){return this.http.get(`${this.url}/produto/${e}`,{headers:new l.WM({loading:"true"})})}create(e){return this.http.post(`${this.url}/produto/${this.account.perfilAcesso_Id!=y.u.Admin?this.account.empresa_Id:this.empresa.id}`,e)}edit(e){return this.http.put(`${this.url}/produto/`,e)}deactivated(e,s){return this.http.patch(`${this.url}/produto/${e}/${s}`,{})}delete(e){return this.http.delete(`${this.url}/produto/${e}`)}}return P.\u0275fac=function(e){return new(e||P)(m.LFG(U.F0),m.LFG(A.i),m.LFG(l.eN),m.LFG(o._W),m.LFG(r.w),m.LFG(g.V),m.LFG(C.P),m.LFG(R.B))},P.\u0275prov=m.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()}}]);