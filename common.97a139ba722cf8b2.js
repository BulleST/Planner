"use strict";(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[592],{8944:(D,l,n)=>{n.d(l,{l:()=>M});var d=n(5861),u=n(9808),h=n(4409),i=n(9398),E=n(9876),g=n(9535),v=n(8913),e=n(4650),O=n(6895),p=n(433);function f(t,c){if(1&t&&(e.TgZ(0,"option",6),e._uU(1),e.qZA()),2&t){const s=c.$implicit;e.Q6J("ngValue",s.id),e.xp6(1),e.Oqu(s.nome)}}let M=(()=>{class t{constructor(s,r,m){var a=this;this.empresaService=s,this.accountService=r,this.dropdownService=m,this.empresaSelected=new i.oW,this.empresaSelectedId=0,this.empresas=[],this.loading=!1,this.Role=h.u,this.subscription=[];var C=this.empresaService.empresa.subscribe(o=>{this.empresaSelected=o,this.empresaSelectedId=o.id});this.subscription.push(C),(0,u.n)(this.dropdownService.getEmpresas()).then(o=>this.empresas=o);var S=this.accountService.account.subscribe(function(){var o=(0,d.Z)(function*(_){a.account=_,_&&_.role&&(null==a.empresaSelected||0==a.empresaSelectedId)&&a.empresaService.setObject(_.empresa??new i.oW,"app-empresa-selected")});return function(_){return o.apply(this,arguments)}}());this.subscription.push(S)}ngOnDestroy(){this.subscription.forEach(s=>s.unsubscribe())}empresaChange(){var s=this.empresas.find(r=>r.id==this.empresaSelectedId);this.empresaService.setObject(s??new i.oW,"empresaChange")}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(v.P),e.Y36(E.B),e.Y36(g.V))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-empresa-select"]],decls:7,vars:2,consts:[[1,"py-2","d-block","d-md-none","col-12"],[1,"form-group"],["for","empresa_Id"],["name","empresa_Id","id","empresa_Id",1,"form-control",3,"ngModel","ngModelChange","change"],["empresa_Id","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(s,r){1&s&&(e._UZ(0,"div",0),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"Selecione a Empresa"),e.qZA(),e.TgZ(4,"select",3,4),e.NdJ("ngModelChange",function(a){return r.empresaSelectedId=a})("change",function(){return r.empresaChange()}),e.YNc(6,f,2,2,"option",5),e.qZA()()),2&s&&(e.xp6(4),e.Q6J("ngModel",r.empresaSelectedId),e.xp6(2),e.Q6J("ngForOf",r.empresas))},dependencies:[O.sg,p.YN,p.Kr,p.EJ,p.JJ,p.On]}),t})()}}]);