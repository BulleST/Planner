"use strict";(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[918],{4918:(Ft,J,o)=>{o.r(J),o.d(J,{EmpresasModule:()=>kt});var T=o(6895),u=o(202),p=o(801),b=o(9398),C=o(8913),U=o(3983),e=o(4650),k=o(7549),Z=o(3868),f=o(433),M=o(2788),y=o(46);const Y=/^\d{2}.\d{3}.\d{3}\/\d{4}-\d{2}$/;function I(i){var n=i.toString();if(!i||!n||n.length>14||"00000000000000"==(n=n.padStart(14,"0"))||"11111111111111"==n||"22222222222222"==n||"33333333333333"==n||"44444444444444"==n||"55555555555555"==n||"66666666666666"==n||"77777777777777"==n||"88888888888888"==n||"99999999999999"==n)return!1;const t="string"==typeof n;if(!(t||Number.isInteger(n)||Array.isArray(n)))return!1;if(t){const h=/^\d{14}$/.test(n),r=Y.test(n);if(!h&&!r)return!1}const s=function le(i=""){const n=i.toString().match(/\d/g);return Array.isArray(n)?n.map(Number):[]}(n);if(14!==n.length||1===[...new Set(n)].length)return!1;const l=n.slice(12);return Q(12,s).toString()===l[0]&&Q(13,s).toString()===l[1]}function Q(i,n){const t=n.slice(0,i);let a=i-7,s=0;for(let l=i;l>=1;l--)s+=t[i-l]*a--,a<2&&(a=9);const c=11-s%11;return c>9?0:c}var A=o(7185),w=o(805),ce=o(9764);function pe(i,n){1&i&&e._UZ(0,"i",13)}function de(i,n){1&i&&e._UZ(0,"i",14)}function ue(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"button",10),e.NdJ("click",function(s){e.CHM(t),e.oxw(2);const c=e.MAs(2);return e.KtG(c.toggle(s))}),e.YNc(2,pe,1,0,"i",11),e.YNc(3,de,1,0,"i",12),e.qZA()()}if(2&i){e.oxw(2);const t=e.MAs(2);e.xp6(2),e.Q6J("ngIf",t.collapsed),e.xp6(1),e.Q6J("ngIf",!t.collapsed)}}function me(i,n){1&i&&e.YNc(0,ue,4,2,"ng-template",7,8,e.W1O)}const he=function(i){return[i]};function fe(i,n){if(1&i&&(e.TgZ(0,"a",17)(1,"span",18),e._UZ(2,"i"),e.qZA(),e.TgZ(3,"span",19),e._uU(4),e.qZA()()),2&i){const t=n.$implicit;e.Q6J("routerLink",e.VKq(5,he,t.routerLink)),e.xp6(2),e.Tol(t.iconClass),e.xp6(2),e.Oqu(t.label)}}function ge(i,n){if(1&i&&(e.TgZ(0,"div",15),e.YNc(1,fe,5,7,"a",16),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.items)}}const F=function(i,n){return[i,n]};function ve(i,n){if(1&i&&(e.TgZ(0,"div")(1,"p-panel",2,3),e.YNc(3,me,2,0,null,4),e.YNc(4,ge,2,1,"ng-template",5,6,e.W1O),e.qZA()()),2&i){const t=e.MAs(2),a=e.oxw();e.Gre("aside-navigation aside-navigation-",a.screen," "),e.ekj("open",!t.collapsed),e.xp6(1),e.Q6J("toggleable",!e.WLB(10,F,a.ScreenWidth.lg,a.ScreenWidth.xl).includes(a.screen)&&a.isEditPage)("collapsed",!0)("showHeader",!e.WLB(13,F,a.ScreenWidth.lg,a.ScreenWidth.xl).includes(a.screen)&&a.isEditPage)("toggler","header"),e.xp6(2),e.Q6J("ngIf",!e.WLB(16,F,a.ScreenWidth.lg,a.ScreenWidth.xl).includes(a.screen))}}let R=(()=>{class i{constructor(t,a,s,c,l,d){this.table=t,this.toastr=a,this.isMobile=s,this.empresaService=c,this.router=l,this.activatedRoute=d,this.items=[],this.objeto=new b.oW,this.erro=[],this.screen=M.I.lg,this.ScreenWidth=M.I,this.subscription=[],this.url="",this.isEditPage=!1;var m=this.isMobile.get().subscribe(r=>this.screen=r);this.subscription.push(m),this.url=this.activatedRoute.snapshot.pathFromRoot.map(r=>r.routeConfig?.path).join("/"),this.items=[{label:"Dados Cadastrais",routerLink:"dados-cadastrais",iconClass:"pi pi-id-card",command:r=>{this.table.selected.next(void 0)}}],this.url.includes("empresas/editar")&&(this.isEditPage=!0,this.items=[{label:"Dados Cadastrais",routerLink:"dados-cadastrais",iconClass:"pi pi-id-card",command:r=>{this.table.selected.next(void 0)}},{label:"Usu\xe1rios",routerLink:"usuarios",iconClass:"pi pi-users",command:r=>{this.table.selected.next(void 0),this.validateDadosCadastrais()}},{label:"Clientes",routerLink:"clientes",iconClass:"pi pi-user",command:r=>{this.table.selected.next(void 0),this.validateDadosCadastrais()}},{label:"Produtos",routerLink:"produtos",iconClass:"fa-solid fa-p",command:r=>{this.table.selected.next(void 0),this.validateDadosCadastrais()}},{label:"Carteira Setup",iconClass:"pi pi-wallet",routerLink:"setup",command:r=>{this.table.selected.next(void 0),this.validateDadosCadastrais()}}]);var h=this.empresaService.empresa.subscribe(r=>this.objeto=r);this.subscription.push(h)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}validateDadosCadastrais(){return this.erro=[],I(this.objeto.cnpj)?this.objeto.nome.trim()?!!this.objeto.email.trim()||(this.toastr.error("E-mail inv\xe1lido."),this.erro.push("E-mail inv\xe1lido."),!1):(this.toastr.error("Raz\xe3o Social inv\xe1lida."),this.erro.push("Raz\xe3o Social inv\xe1lida."),!1):(this.toastr.error("CNPJ inv\xe1lido."),this.erro.push("CNPJ inv\xe1lido."),!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.i),e.Y36(A._W),e.Y36(M.h),e.Y36(C.P),e.Y36(u.F0),e.Y36(u.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-menu-items"]],decls:4,vars:9,consts:[[1,"d-flex","flex-wrap","step-container"],[3,"class","open",4,"ngIf"],["headerTemplate","header","contentTemplate","content","expandIcon","none","collapseIcon","none",3,"toggleable","collapsed","showHeader","toggler"],["menu",""],[4,"ngIf"],["pTemplate","content"],["content",""],["pTemplate","header"],["header",""],[1,"aside-navigation-header"],["label","Show",1,"btn","btn-primary",3,"click"],["class","pi pi-bars",4,"ngIf"],["class","pi pi-times",4,"ngIf"],[1,"pi","pi-bars"],[1,"pi","pi-times"],[1,"aside-navigation-content"],["class","aside-navigation__link","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"aside-navigation__link",3,"routerLink"],[1,"aside-navigation__link-icon"],[1,"aside-navigation__link-label"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ve,6,19,"div",1),e.TgZ(2,"div"),e._UZ(3,"router-outlet"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",a.isEditPage),e.xp6(1),e.Gre("step-content step-content-",a.screen,""),e.ekj("step-content-margin",!e.WLB(6,F,a.ScreenWidth.lg,a.ScreenWidth.xl).includes(a.screen)))},dependencies:[T.sg,T.O5,u.lC,u.yS,u.Od,w.jx,ce.s],styles:[".step-container[_ngcontent-%COMP%]   .step-content[_ngcontent-%COMP%]{flex:1 0 75%;width:75%}.step-content.step-content-margin[_ngcontent-%COMP%]{margin-top:34px}.step-content.step-content-sm[_ngcontent-%COMP%]{flex:1 0 100%;width:100%;margin-top:10px}.aside-navigation[_ngcontent-%COMP%]{flex:0 1 25%;min-width:170px;max-width:220px;width:25%;padding-right:5px}.aside-navigation-content[_ngcontent-%COMP%]{background-color:var(--primary);background-color:#f5f5f5;border:1px #dfdfdf solid;transform:translate(1px)}.aside-navigation__link[_ngcontent-%COMP%]{color:var(--primary);color:#403f3f;display:flex;align-items:center;padding:7px 8px;text-decoration:none;font-size:15px;transition:.3s color 0s;text-transform:lowercase;letter-spacing:-.3px;border:1px transparent solid}.aside-navigation__link[_ngcontent-%COMP%]:hover{text-decoration:none}.aside-navigation__link[_ngcontent-%COMP%]:not(.active):hover{background:#e3e3e3}.aside-navigation__link-icon[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;margin-right:7px;border-radius:3px;color:#fff;font-size:13px;background-color:#fff;background-color:#104456}.aside-navigation__link.active[_ngcontent-%COMP%]{background-color:var(--primary);color:#ffffffe8;transform:scaleX(1.01)}.aside-navigation__link.active[_ngcontent-%COMP%]   .aside-navigation__link-icon[_ngcontent-%COMP%]{background-color:#125268}  .aside-navigation-sm .p-toggleable-content{position:relative;width:100%;transition:.5s;z-index:2;min-width:80%;max-width:unset;margin:0}.aside-navigation-sm[_ngcontent-%COMP%]{position:relative;width:100%!important;max-width:unset!important;flex:0 1 100%!important;padding-right:0!important}.aside-navigation-sm[_ngcontent-%COMP%]   .p-toggleable-content[_ngcontent-%COMP%]{position:relative;width:100%;max-width:unset}.aside-navigation-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0;font-size:13px;display:flex;align-items:center;justify-content:center;line-height:1;margin:0 11px;width:30px;height:30px;background-color:#2a718b}.aside-navigation-sm.open[_ngcontent-%COMP%]   .aside-navigation-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-bottom:10px}"]}),i})(),be=(()=>{class i{constructor(t,a,s,c,l){this.empresaService=t,this.modal=s,this.activatedRoute=c,this.router=l,this.faChevronLeft=p.jio,this.faArrowRight=p.eFW,this.faEllipsisV=p.iV1,this.faTimes=p.NBC,this.faCity=p.SBo,this.objeto=new b.oW,this.erro=[],this.index=1,this.cnpjValid=!1,this.subscription=[],this.routerBack=["../"],this.routeBackOptions={relativeTo:this.activatedRoute},null==this.empresaService.object&&this.empresaService.setObject(new b.oW,"CreateComponent");var d=this.empresaService.empresa.subscribe(m=>{this.objeto=m,this.objeto.produto=this.objeto.produto??[],this.objeto.percentualRisco=this.objeto.percentualRisco??[],this.objeto.cliente=this.objeto.cliente??[],this.objeto.account=this.objeto.account??[],this.objeto.carteiraSetup=this.objeto.carteiraSetup??[]});this.subscription.push(d)}ngOnDestroy(){this.empresaService.setObject(new b.oW,"ngOnDestroy"),this.modal.setOpen(!1),this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.router.navigate(this.routerBack,{relativeTo:this.activatedRoute,preserveFragment:!1,replaceUrl:!0}),this.modal.setOpen(!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.P),e.Y36(U.s),e.Y36(k.Q),e.Y36(u.gz),e.Y36(u.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create"]],decls:19,vars:2,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__header-subtitle"],[1,"page__body","px-3"],[1,"mb-3"],[1,"link","text-dark",3,"click"],[1,"mr-1",3,"icon"],["form","ngForm"]],template:function(t,a){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Empresa"),e.qZA(),e.TgZ(7,"p",6)(8,"small"),e._uU(9,"Cadastrar empresa"),e.qZA()()()(),e.TgZ(10,"div",7)(11,"p",8)(12,"a",9),e.NdJ("click",function(){return a.voltar()}),e._UZ(13,"fa-icon",10),e.TgZ(14,"span"),e._uU(15,"Voltar"),e.qZA()()(),e.TgZ(16,"form",null,11),e._UZ(18,"app-menu-items"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("icon",a.faCity),e.xp6(10),e.Q6J("icon",a.faChevronLeft))},dependencies:[Z.BN,f._Y,f.JL,f.F,R],styles:[".aside-navigation[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-wrap:wrap;flex:0 1 20%;min-width:170px;width:20%;background-color:var(--primary);background-color:#f5f5f5;border:1px #dfdfdf solid;transform:translate(1px)}"]}),i})();var P=o(9243);function _e(i,n){1&i&&(e._UZ(0,"p",18),e.ALo(1,"json")),2&i&&e.Q6J("innerHTML",e.lcZ(1,1,n.$implicit),e.oJD)}function Ce(i,n){if(1&i&&(e.TgZ(0,"div",16),e.YNc(1,_e,2,3,"p",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.erro)}}function Te(i,n){1&i&&e._UZ(0,"span",19)}function Ze(i,n){1&i&&(e.TgZ(0,"div",20),e._uU(1," Acione a seta para cima ou para baixo no teclado para mudar o valor "),e.qZA())}function xe(i,n){1&i&&(e.TgZ(0,"div",20),e._uU(1," Este campo \xe9 obrigat\xf3rio "),e.qZA())}let ye=(()=>{class i{constructor(t,a,s,c,l,d){this.router=t,this.activatedRoute=a,this.toastr=s,this.modal=c,this.empresaService=l,this.crypto=d,this.faTimes=p.NBC,this.modalOpen=!1,this.objeto=new b.oW,this.erro=[],this.loading=!1,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var m=this.modal.getOpen().subscribe(r=>this.modalOpen=r);this.subscription.push(m);var h=this.activatedRoute.params.subscribe(r=>{r.id&&(this.objeto.id=this.crypto.decrypt(r.id))});this.subscription.push(h),setTimeout(()=>{this.modal.setOpen(!0)},200)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modal.setOpen(!1),setTimeout(()=>{this.router.navigate(["empresas"])},200)}send(){this.loading=!0,this.erro=[],this.empresaService.delete(this.objeto.id),this.voltar(),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),this.loading=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(A._W),e.Y36(k.Q),e.Y36(C.P),e.Y36(P.w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete"]],decls:26,vars:5,consts:[[1,"modal"],[1,"modal__bg",3,"click"],[1,"modal__inner",2,"max-width","600px"],[1,"modal__content"],[1,"modal__header","pb-2"],[1,"text-orange"],[1,"mt-2"],[1,"modal__header-close","btn-close",3,"click"],[1,"modal__body","mt-0"],["class","m-0 col-lg-12 mt-1",4,"ngIf"],[1,"d-flex","justify-content-center","flex-wrap","p-0","mt-1"],[1,"btn","btn-grey","mr-1",3,"click"],[1,"btn","btn-primary","mr-0",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["setaUpDown",""],["campoObrigatorio",""],[1,"m-0","col-lg-12","mt-1"],["class","text-red",3,"innerHTML",4,"ngFor","ngForOf"],[1,"text-red",3,"innerHTML"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"py-3","px-4"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return a.voltar()}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),e._uU(6,"Excluir registro"),e.qZA(),e.TgZ(7,"p",6),e._uU(8,"Tem certeza que deseja excluir esse registro? Ele n\xe3o poder\xe1 ser recuperado."),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Todos os registros relacionados a esse cliente tamb\xe9m ser\xe3o removidos."),e.qZA(),e.TgZ(11,"a",7),e.NdJ("click",function(){return a.voltar()}),e._UZ(12,"span")(13,"span"),e.qZA()(),e.TgZ(14,"div",8),e.YNc(15,Ce,2,1,"div",9),e.TgZ(16,"div",10)(17,"button",11),e.NdJ("click",function(){return a.voltar()}),e._uU(18," Voltar"),e.qZA(),e.TgZ(19,"button",12),e.NdJ("click",function(){return a.send()}),e.YNc(20,Te,1,0,"span",13),e._uU(21," Excluir "),e.qZA()()()()()(),e.YNc(22,Ze,2,0,"ng-template",null,14,e.W1O),e.YNc(24,xe,2,0,"ng-template",null,15,e.W1O)),2&t&&(e.ekj("active",a.modalOpen),e.xp6(15),e.Q6J("ngIf",a.erro),e.xp6(4),e.Q6J("disabled",a.loading),e.xp6(1),e.Q6J("ngIf",a.loading))},dependencies:[T.sg,T.O5,T.Ts]}),i})();var D=o(5861),_=o(9808),q=o(9876),W=o(932),B=o(9885),H=o(9205),G=o(3071);let je=(()=>{class i{constructor(t,a,s,c,l,d,m,h,r,S,g){var x=this;this.router=t,this.activatedRoute=a,this.empresaService=s,this.produtoService=c,this.setupService=l,this.userService=d,this.clienteService=m,this.crypto=h,this.modal=r,this.accountService=S,this.table=g,this.faChevronLeft=p.A35,this.faArrowRight=p.eFW,this.faEllipsisV=p.iV1,this.faTimes=p.NBC,this.faCity=p.SBo,this.faUsers=p.FVb,this.faFilter=p.G_j,this.objeto=new b.oW,this.erro=[],this.loading=!1,this.index=1,this.empresaSelectedId=0,this.empresas=[],this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var v=this.table.loading.subscribe(j=>this.loading=j);this.subscription.push(v),(0,_.n)(this.empresaService.getList()).then(j=>this.empresas=j);var Pt=this.accountService.account.subscribe(j=>this.account=j);this.subscription.push(Pt),this.empresaSelectedId=this.crypto.decrypt(a.snapshot.paramMap.get("empresa_id"));var Lt=a.params.subscribe(function(){var j=(0,D.Z)(function*(N){N.empresa_id?(x.objeto.id=x.crypto.decrypt(N.empresa_id),x.objeto=yield(0,_.n)(x.empresaService.get(x.objeto.id)),x.getEmpresaData()):x.voltar()});return function(N){return j.apply(this,arguments)}}());this.subscription.push(Lt)}ngOnDestroy(){this.empresaService.setObject(new b.oW,"ngOnDestroy"),this.modal.setOpen(!1),this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.router.navigate(this.routerBack,{relativeTo:this.activatedRoute,preserveFragment:!1,replaceUrl:!0}),this.modal.setOpen(!1)}empresaChange(t){var a=this.activatedRoute.children[this.activatedRoute.children.length-1]?.routeConfig?.path??"";this.router.navigate(["empresas","editar",this.crypto.encrypt(this.objeto.id),a],{skipLocationChange:!0})}getEmpresaData(){var t=this;return(0,D.Z)(function*(){(0,_.n)(t.userService.getList(t.objeto.id)).then(a=>{t.objeto.account=a,t.empresaService.setObject(t.objeto,"getEmpresaData userService")}),(0,_.n)(t.clienteService.getList(t.objeto.id)).then(a=>{t.objeto.cliente=a,t.empresaService.setObject(t.objeto,"getEmpresaData clienteService")}),(0,_.n)(t.produtoService.getList(t.objeto.id)).then(a=>{t.objeto.produto=a,t.empresaService.setObject(t.objeto,"getEmpresaData produtoService")}),(0,_.n)(t.setupService.getList(t.objeto.id)).then(a=>{t.objeto.carteiraSetup=a,t.empresaService.setObject(t.objeto,"getEmpresaData setupService")})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.F0),e.Y36(u.gz),e.Y36(C.P),e.Y36(B.m),e.Y36(H.A),e.Y36(G.i),e.Y36(W.$),e.Y36(P.w),e.Y36(k.Q),e.Y36(q.B),e.Y36(y.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],decls:19,vars:3,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__header-subtitle"],[1,"page__body","px-3"],[1,"mb-3"],[1,"link","text-dark",3,"click"],[1,"mr-1",3,"icon"],["form","ngForm"]],template:function(t,a){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6),e.qZA(),e.TgZ(7,"p",6)(8,"small"),e._uU(9,"Editar registros"),e.qZA()()()(),e.TgZ(10,"div",7)(11,"p",8)(12,"a",9),e.NdJ("click",function(){return a.voltar()}),e._UZ(13,"fa-icon",10),e.TgZ(14,"span"),e._uU(15,"Voltar"),e.qZA()()(),e.TgZ(16,"form",null,11),e._UZ(18,"app-menu-items"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("icon",a.faCity),e.xp6(3),e.hij("Empresa - ",a.objeto.nome,""),e.xp6(7),e.Q6J("icon",a.faChevronLeft))},dependencies:[Z.BN,f._Y,f.JL,f.F,R],styles:[".aside-navigation[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-wrap:wrap;flex:0 1 20%;min-width:170px;width:20%;background-color:var(--primary);background-color:#f5f5f5;border:1px #dfdfdf solid;transform:translate(1px)}"]}),i})();var L=o(453);const Ae=function(){return["cadastrar"]};let Se=(()=>{class i{constructor(t,a,s){this.table=t,this.empresaService=a,this.crypto=s,this.faCity=p.SBo,this.list=[],this.tableLinks=[],this.columns=b.jH,this.subscription=[],this.create=(d=this.empresaService)=>{d.setObject(new b.oW,"create")};var c=this.table.selected.subscribe(d=>{d&&(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:d.ativo?"Desabilitar":"Habilitar",routePath:[d.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(c);var l=this.empresaService.list.subscribe(d=>this.list=d);this.subscription.push(l),this.table.currentPage.next(1),(0,_.n)(this.empresaService.getList())}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.i),e.Y36(C.P),e.Y36(P.w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-list"]],decls:13,vars:15,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__header-subtitle"],[1,"page__body"],[3,"createLink","onCreate","canCreate","list","paginator","filterLink","filterTable","sortTable","menuTable","columns","selectable","tableLinks"]],template:function(t,a){1&t&&(e.TgZ(0,"section",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div",4)(5,"h3",5),e._uU(6,"Empresas"),e.qZA(),e.TgZ(7,"p",6)(8,"small"),e._uU(9,"Todas as empresas"),e.qZA()()()(),e.TgZ(10,"div",7),e._UZ(11,"app-list-shared",8),e.qZA()(),e._UZ(12,"router-outlet")),2&t&&(e.xp6(3),e.Q6J("icon",a.faCity),e.xp6(8),e.Q6J("createLink",e.DdM(14,Ae))("onCreate",a.create)("canCreate",!0)("list",a.list)("paginator",!0)("filterLink",!1)("filterTable",!0)("sortTable",!0)("menuTable",!0)("columns",a.columns)("selectable",!0)("tableLinks",a.tableLinks)("selectable",!0))},dependencies:[u.lC,Z.BN,L.o]}),i})();var E=o(878),z=o(279),V=o(1094);const ke=["cnpj"];function Pe(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Le(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"Remova os espa\xe7os antes e depois do texto."),e.qZA())}function Fe(i,n){if(1&i&&(e.TgZ(0,"p",12),e.YNc(1,Le,2,0,"span",15),e.qZA()),2&i){e.oxw(2);const t=e.MAs(20);e.xp6(1),e.Q6J("ngIf","^\\S(.*\\S)?$"==t.errors.pattern.requiredPattern)}}function Ee(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Pe,2,0,"p",23),e.YNc(2,Fe,2,1,"p",23),e.qZA()),2&i){e.oxw();const t=e.MAs(20);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.pattern)}}function Ue(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Me(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"CNPJ inv\xe1lido."),e.qZA())}function De(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"CNPJ inv\xe1lido."),e.qZA())}function Oe(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ue,2,0,"p",23),e.YNc(2,Me,2,0,"p",23),e.YNc(3,De,2,0,"p",23),e.qZA()),2&i){e.oxw();const t=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.mask),e.xp6(1),e.Q6J("ngIf",t.errors.invalid)}}function Ne(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"Este campo \xe9 obrigat\xf3rio."),e.qZA())}function Je(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"E-mail inv\xe1lido."),e.qZA())}function Ye(i,n){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ne,2,0,"p",23),e.YNc(2,Je,2,0,"p",23),e.qZA()),2&i){e.oxw();const t=e.MAs(36);e.xp6(1),e.Q6J("ngIf",t.errors.required),e.xp6(1),e.Q6J("ngIf",t.errors.email)}}function Ie(i,n){1&i&&(e.TgZ(0,"p",12),e._uU(1,"Preencha todos os campos obrigat\xf3rios (*) corretamente para continuar"),e.qZA())}function Qe(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(),c=e.MAs(12);return e.KtG(s.next(c))}),e.TgZ(1,"span",25),e._uU(2,"Pr\xf3ximo"),e.qZA(),e._UZ(3,"fa-icon",3),e.qZA()}if(2&i){const t=e.oxw(),a=e.MAs(12);e.Q6J("disabled",a.invalid)("title",a.invalid?"Preencha os campos corretamente para continuar":"Pr\xf3ximo passo"),e.xp6(3),e.Q6J("icon",t.faArrowRight)}}function we(i,n){1&i&&(e.TgZ(0,"div",29),e._uU(1," Este campo \xe9 obrigat\xf3rio "),e.qZA())}let $=(()=>{class i{constructor(t,a,s,c,l,d){this.toastr=t,this.empresaService=a,this.router=s,this.activatedRoute=c,this.table=l,this.menuItems=d,this.faIdCard=p.Ukp,this.objeto=new b.oW,this.faArrowLeft=p.acZ,this.faArrowRight=p.eFW,this.faCheck=p.LEp,this.isEditPage=!1,this.url="",this.subscription=[],this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,this.regexCNPJ=Y,this.url=this.activatedRoute.snapshot.pathFromRoot.map(m=>m.routeConfig?.path).join("/"),this.isEditPage=!!this.url.includes("empresas/editar")}ngAfterViewInit(){var t=this.empresaService.empresa.subscribe(a=>{this.objeto=Object.assign(JSON.parse(JSON.stringify(a))),this.objeto.cnpj=this.objeto.cnpj.toString().trim()?this.objeto.cnpj.toString().padStart(14,"0"):"",this.validateCnpj(this.cnpjModel)});this.subscription.push(t)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}setDadosCadastrais(){this.empresaService.setObject(this.objeto,"setDadosCadastrais")}validateCnpj(t){var a=I(this.objeto.cnpj);return t.control.setErrors(a?null:{invalid:!0}),a}next(t){t.invalid?this.toastr.error("Dados inv\xe1lidos"):(this.objeto.cnpj=parseInt(this.objeto.cnpj.toString()),this.setDadosCadastrais(),this.router.navigate(["..","usuarios"],{relativeTo:this.activatedRoute}))}send(t){t.invalid?this.toastr.error("Dados inv\xe1lidos"):(this.objeto.cnpj=parseInt(this.objeto.cnpj.toString()),0==this.objeto.id&&this.url.includes("empresas/cadastrar")?(0,_.n)(this.empresaService.create(this.objeto)).catch(a=>this.menuItems.erro.push((0,E.b)(a))):(0,_.n)(this.empresaService.edit(this.objeto)).catch(a=>this.menuItems.erro.push((0,E.b)(a))))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A._W),e.Y36(C.P),e.Y36(u.F0),e.Y36(u.gz),e.Y36(y.i),e.Y36(U.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dados-cadastrais-create"]],viewQuery:function(t,a){if(1&t&&e.Gf(ke,5),2&t){let s;e.iGM(s=e.CRH())&&(a.cnpjModel=s.first)}},decls:47,vars:21,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center","py-2"],[1,"title-icon"],[3,"icon"],[1,"card-header-title"],[1,"card-header-subtitle"],[1,"card-body"],[1,"d-flex","flex-column","h-100",3,"ngSubmit"],["form","ngForm"],[1,"form-row"],[1,"form-group","col-lg-4","col-md-4","col-sm-12","col-12"],["for","nome"],[1,"text-danger"],["type","text","id","nome","name","nome","required","","popoverClass","popover-danger","triggers","mouseenter:mouseleave","pattern","\\S(.*\\S)?",1,"form-control",3,"ngModel","ngbPopover","ngModelChange","change"],["nome","ngModel"],[4,"ngIf"],["for","cnpj"],["type","text","id","cnpj","name","cnpj","placeholder","00.000.000/0000-00","required","","popoverClass","popover-danger","triggers","mouseenter:mouseleave",1,"form-control",3,"ngModel","mask","min","minlength","maxlength","ngbPopover","ngModelChange","change"],["cnpj","ngModel"],["for","email"],["type","email","id","email","name","email","placeholder","example@hotmail.com","required","","popoverClass","popover-danger","triggers","mouseenter:mouseleave",1,"form-control",3,"email","ngModel","ngbPopover","pattern","ngModelChange","change"],["email","ngModel"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap"],["class","text-danger",4,"ngIf"],["type","submit",1,"btn","ml-auto","btn-step","btn-step-next","mt-2",3,"disabled","title"],[1,"btn-step-text"],["type","button","class","btn ml-2 btn-step btn-step-next mt-2",3,"disabled","title","click",4,"ngIf"],["campoObrigatorio",""],["type","button",1,"btn","ml-2","btn-step","btn-step-next","mt-2",3,"disabled","title","click"],[1,"py-3","px-4"]],template:function(t,a){if(1&t){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div")(5,"h3",4),e._uU(6,"Dados cadastrais"),e.qZA(),e.TgZ(7,"p",5)(8,"small"),e._uU(9,"Insira os dados cadastrais da empresa"),e.qZA()()()(),e.TgZ(10,"div",6)(11,"form",7,8),e.NdJ("ngSubmit",function(){e.CHM(s);const l=e.MAs(12);return e.KtG(a.send(l))}),e.TgZ(13,"div",9)(14,"div",10)(15,"label",11),e._uU(16,"Raz\xe3o Social: "),e.TgZ(17,"span",12),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"input",13,14),e.NdJ("ngModelChange",function(l){return a.objeto.nome=l})("change",function(){e.CHM(s);const l=e.MAs(20);return a.objeto.nome=l.value.trim(),e.KtG(a.setDadosCadastrais())}),e.qZA(),e.YNc(21,Ee,3,2,"div",15),e.qZA(),e.TgZ(22,"div",10)(23,"label",16),e._uU(24,"CNPJ: "),e.TgZ(25,"span",12),e._uU(26,"*"),e.qZA()(),e.TgZ(27,"input",17,18),e.NdJ("ngModelChange",function(l){return a.objeto.cnpj=l})("change",function(){e.CHM(s);const l=e.MAs(28);return a.validateCnpj(l),e.KtG(a.setDadosCadastrais())}),e.qZA(),e.YNc(29,Oe,4,3,"div",15),e.qZA(),e.TgZ(30,"div",10)(31,"label",19),e._uU(32,"E-mail: "),e.TgZ(33,"span",12),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"input",20,21),e.NdJ("ngModelChange",function(l){return a.objeto.email=l})("change",function(){return a.setDadosCadastrais()}),e.qZA(),e.YNc(37,Ye,3,2,"div",15),e.qZA()(),e.TgZ(38,"div",22),e.YNc(39,Ie,2,0,"p",23),e.TgZ(40,"button",24)(41,"span",25),e._uU(42,"Salvar dados cadastrais"),e.qZA(),e._UZ(43,"fa-icon",3),e.qZA(),e.YNc(44,Qe,4,3,"button",26),e.qZA()()()(),e.YNc(45,we,2,0,"ng-template",null,27,e.W1O)}if(2&t){const s=e.MAs(12),c=e.MAs(20),l=e.MAs(28),d=e.MAs(36),m=e.MAs(46);e.xp6(3),e.Q6J("icon",a.faIdCard),e.xp6(16),e.Q6J("ngModel",a.objeto.nome)("ngbPopover",m),e.xp6(2),e.Q6J("ngIf",c.touched&&c.errors),e.xp6(6),e.Q6J("ngModel",a.objeto.cnpj)("mask","00.000.000/0000-00")("min",1)("minlength",14)("maxlength",18)("ngbPopover",m),e.xp6(2),e.Q6J("ngIf",l.touched&&l.errors),e.xp6(6),e.Q6J("email",!0)("ngModel",a.objeto.email)("ngbPopover",m)("pattern",a.emailPattern),e.xp6(2),e.Q6J("ngIf",d.touched&&d.errors),e.xp6(2),e.Q6J("ngIf",s.invalid),e.xp6(1),e.Q6J("disabled",s.invalid)("title",s.invalid?"Preencha os campos corretamente para continuar":"Pr\xf3ximo passo"),e.xp6(3),e.Q6J("icon",a.faCheck),e.xp6(1),e.Q6J("ngIf",a.isEditPage)}},dependencies:[T.O5,Z.BN,f._Y,f.Fj,f.JJ,f.JL,f.Q7,f.wO,f.nD,f.c5,f.on,f.On,f.F,z.o8,V.hx]}),i})();var Re=o(4506);let qe=(()=>{class i{constructor(t,a,s){this.empresaService=t,this.toastr=a,this.alert=s}canActivate(t,a){return!0}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C.P),e.LFG(A._W),e.LFG(Re.c))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var X=o(4429);const We=function(){return["cadastrar"]};let Be=(()=>{class i{constructor(t,a,s,c,l){this.empresaService=t,this.clienteService=a,this.activatedRoute=s,this.router=c,this.table=l,this.faArrowLeft=p.acZ,this.faArrowRight=p.eFW,this.faEllipsisV=p.iV1,this.faUsers=p.FVb,this.faFilter=p.G_j,this.faTimes=p.NBC,this.loading=!1,this.columns=X.lF,this.objeto=new b.oW,this.tableLinks=[],this.subscription=[],this.create=(r=this.clienteService)=>{r.setObject(new X.c1)};var d=this.empresaService.empresa.subscribe(r=>this.objeto=r);this.subscription.push(d),this.activatedRoute.snapshot.pathFromRoot.map(r=>r.routeConfig?.path).join("/").includes("empresas/editar")||(this.columns=this.columns.filter(r=>"ativo"!=r.field));var h=this.table.selected.subscribe(r=>{this.tableLinks=[],r&&(this.tableLinks.push({label:"Editar",routePath:["editar"],paramsFieldName:["id"]}),this.tableLinks.push(r.registroNaoSalvo?{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}:{label:r.ativo?"Desabilitar":"Habilitar",routePath:[r.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(h)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}next(){this.router.navigate(["..","produtos"],{relativeTo:this.activatedRoute})}previous(){this.router.navigate(["..","usuarios"],{relativeTo:this.activatedRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.P),e.Y36(W.$),e.Y36(u.gz),e.Y36(u.F0),e.Y36(y.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-clientes"]],decls:22,vars:16,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center","py-2"],[1,"title-icon"],[3,"icon"],[1,"card-header-title"],[1,"card-header-subtitle"],[1,"card-body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","selectable","tableLinks"],[1,"d-flex","justify-content-between","px-2","mt-auto"],["title","Anteiror",1,"btn","btn-step","btn-step-prev","mt-2",3,"click"],[1,"btn-step-text"],["title","Pr\xf3ximo",1,"btn","btn-step","btn-step-next","mt-2",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div")(5,"h3",4),e._uU(6,"Clientes"),e.qZA(),e.TgZ(7,"p",5)(8,"small"),e._uU(9,"Cadastrar um cliente para essa empresa"),e.qZA()()()(),e.TgZ(10,"div",6),e._UZ(11,"app-list-shared",7),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return a.previous()}),e._UZ(14,"fa-icon",3),e.TgZ(15,"span",10),e._uU(16,"Anterior"),e.qZA()(),e.TgZ(17,"button",11),e.NdJ("click",function(){return a.next()}),e.TgZ(18,"span",10),e._uU(19,"Pr\xf3ximo"),e.qZA(),e._UZ(20,"fa-icon",3),e.qZA()()()(),e._UZ(21,"router-outlet")),2&t&&(e.xp6(3),e.Q6J("icon",a.faUsers),e.xp6(8),e.Q6J("createLink",e.DdM(15,We))("onCreate",a.create)("canCreate",!0)("list",a.objeto.cliente)("filterLink",!0)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",a.columns)("selectable",!0)("tableLinks",a.tableLinks),e.xp6(3),e.Q6J("icon",a.faArrowLeft),e.xp6(6),e.Q6J("icon",a.faArrowRight))},dependencies:[u.lC,L.o,Z.BN]}),i})();var He=o(8785),Ge=o(3834),ze=o(4595),K=o(9738),O=o(4409),ee=o(1685),te=o(8164);const Ve=function(){return["cadastrar"]};let $e=(()=>{class i{constructor(t,a,s,c,l,d){this.empresaService=t,this.accountService=a,this.userService=s,this.router=c,this.table=l,this.activatedRoute=d,this.faUser=p.FVb,this.faArrowLeft=p.acZ,this.faArrowRight=p.eFW,this.objeto=new b.oW,this.columns=te.Sf,this.tableLinks=[],this.account=new ee.mR,this.subscription=[],this.create=(g=this.userService)=>{g.setObject(new te.bo)};var m=this.accountService.account.subscribe(g=>this.account=g??new ee.mR);this.subscription.push(m);var h=this.empresaService.empresa.subscribe(g=>this.objeto=g);this.subscription.push(h),this.activatedRoute.snapshot.pathFromRoot.map(g=>g.routeConfig?.path).join("/").includes("empresas/editar")||(this.columns=this.columns.filter(g=>"ativo"!=g.field));var S=this.table.selected.subscribe(g=>{this.tableLinks=[],g&&(this.tableLinks.push({label:"Editar",routePath:["editar"],paramsFieldName:["id"]}),g.registroNaoSalvo?this.tableLinks.push({label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}):(this.tableLinks.push({label:g.ativo?"Desabilitar":"Habilitar",routePath:[g.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}),this.tableLinks.push({label:"Resetar senha",routePath:["reset-password"],paramsFieldName:["id"]})),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(S)}ngOnDestroy(){this.subscription.forEach(t=>{t.unsubscribe()})}next(){this.router.navigate(["..","clientes"],{relativeTo:this.activatedRoute})}previous(){this.router.navigate(["..","dados-cadastrais"],{relativeTo:this.activatedRoute})}canMenu(){return`(${this.account.perfilAcesso_Id} == ${O.u.Admin}) || (${this.account.perfilAcesso_Id} == ${O.u.Master} && item.perfilAcesso_Id != ${O.u.Admin})`}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.P),e.Y36(q.B),e.Y36(G.i),e.Y36(u.F0),e.Y36(y.i),e.Y36(u.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-usuarios-create"]],decls:22,vars:16,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center","py-2"],[1,"title-icon"],[3,"icon"],[1,"card-header-title"],[1,"card-header-subtitle"],[1,"card-body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"d-flex","justify-content-between","px-2","mt-auto"],["title","Anteiror",1,"btn","btn-step","btn-step-prev","mt-2",3,"click"],[1,"btn-step-text"],["title","Pr\xf3ximo",1,"btn","btn-step","btn-step-next","mt-2",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div")(5,"h3",4),e._uU(6,"Usu\xe1rios"),e.qZA(),e.TgZ(7,"p",5)(8,"small"),e._uU(9,"Inclua usu\xe1rios dessa empresa para acessar o sistema"),e.qZA()()()(),e.TgZ(10,"div",6),e._UZ(11,"app-list-shared",7),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return a.previous()}),e._UZ(14,"fa-icon",3),e.TgZ(15,"span",10),e._uU(16,"Anterior"),e.qZA()(),e.TgZ(17,"button",11),e.NdJ("click",function(){return a.next()}),e.TgZ(18,"span",10),e._uU(19,"Pr\xf3ximo"),e.qZA(),e._UZ(20,"fa-icon",3),e.qZA()()()(),e._UZ(21,"router-outlet")),2&t&&(e.xp6(3),e.Q6J("icon",a.faUser),e.xp6(8),e.Q6J("createLink",e.DdM(15,Ve))("onCreate",a.create)("canCreate",!0)("list",a.objeto.account)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",a.canMenu())("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0),e.xp6(3),e.Q6J("icon",a.faArrowLeft),e.xp6(6),e.Q6J("icon",a.faArrowRight))},dependencies:[u.lC,L.o,Z.BN]}),i})();var Xe=o(1829),Ke=o(2193),et=o(662),ie=o(9155),ae=o(6886);const tt=function(){return["cadastrar"]};let it=(()=>{class i{constructor(t,a,s,c,l){this.empresaService=t,this.router=a,this.activatedRoute=s,this.produtoService=c,this.table=l,this.faHandHoldingDollar=p.VPG,this.faArrowLeft=p.acZ,this.faArrowRight=p.eFW,this.objeto=new b.oW,this.columns=ae.Dw,this.tableLinks=[],this.subscription=[],this.create=(r=this.produtoService)=>{r.setObject(new ae.a7)};var d=this.empresaService.empresa.subscribe(r=>this.objeto=r);this.subscription.push(d),this.activatedRoute.snapshot.pathFromRoot.map(r=>r.routeConfig?.path).join("/").includes("empresas/editar")||(this.columns=this.columns.filter(r=>"ativo"!=r.field));var h=this.table.selected.subscribe(r=>{this.tableLinks=[],r&&(this.tableLinks.push({label:"Editar",routePath:["editar"],paramsFieldName:["id"]}),this.tableLinks.push(r.registroNaoSalvo?{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}:{label:r.ativo?"Desabilitar":"Habilitar",routePath:[r.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(h)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}next(){this.router.navigate(["..","setup"],{relativeTo:this.activatedRoute})}previous(){this.router.navigate(["..","clientes"],{relativeTo:this.activatedRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.P),e.Y36(u.F0),e.Y36(u.gz),e.Y36(B.m),e.Y36(y.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-produtos-create"]],decls:22,vars:16,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center","py-2"],[1,"title-icon"],[3,"icon"],[1,"card-header-title"],[1,"card-header-subtitle"],[1,"card-body"],[3,"createLink","onCreate","canCreate","list","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"d-flex","justify-content-between","px-2","mt-auto"],["title","Anteiror",1,"btn","btn-step","btn-step-prev","mt-2",3,"click"],[1,"btn-step-text"],["title","Pr\xf3ximo",1,"btn","btn-step","btn-step-next","mt-2",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"fa-icon",3),e.qZA(),e.TgZ(4,"div")(5,"h3",4),e._uU(6,"Produtos"),e.qZA(),e.TgZ(7,"p",5)(8,"small"),e._uU(9,"Inclua produtos para essa empresa"),e.qZA()()()(),e.TgZ(10,"div",6),e._UZ(11,"app-list-shared",7),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return a.previous()}),e._UZ(14,"fa-icon",3),e.TgZ(15,"span",10),e._uU(16,"Anterior"),e.qZA()(),e.TgZ(17,"button",11),e.NdJ("click",function(){return a.next()}),e.TgZ(18,"span",10),e._uU(19,"Pr\xf3ximo"),e.qZA(),e._UZ(20,"fa-icon",3),e.qZA()()()(),e._UZ(21,"router-outlet")),2&t&&(e.xp6(3),e.Q6J("icon",a.faHandHoldingDollar),e.xp6(8),e.Q6J("createLink",e.DdM(15,tt))("onCreate",a.create)("canCreate",!0)("list",a.objeto.produto)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("canCreate",!0)("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0),e.xp6(3),e.Q6J("icon",a.faArrowLeft),e.xp6(6),e.Q6J("icon",a.faArrowRight))},dependencies:[u.lC,L.o,Z.BN]}),i})();var at=o(8446),nt=o(343),st=o(9899),ne=o(4163),se=o(6025);function ot(i,n){if(1&i&&(e.TgZ(0,"p",15),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.xp6(1),e.Oqu(t)}}function rt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.next())}),e.TgZ(1,"span",13),e._uU(2,"Finalizar "),e.qZA(),e._UZ(3,"fa-icon",12),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.loading),e.xp6(3),e.Q6J("icon",t.faCheck)}}const lt=function(){return["cadastrar"]};let ct=(()=>{class i{constructor(t,a,s,c,l,d,m,h,r){this.empresaService=t,this.router=a,this.activatedRoute=s,this.table=c,this.crypto=l,this.menuItems=d,this.toastr=m,this.setupService=h,this.modal=r,this.faWallet=p.X5K,this.faArrowLeft=p.acZ,this.faArrowRight=p.eFW,this.faFilter=p.G_j,this.faTimes=p.NBC,this.faEllipsisV=p.iV1,this.faCheck=p.LEp,this.objeto=new b.oW,this.columns=se.T7,this.tableLinks=[],this.isEditPage=!1,this.url="",this.loading=!1,this.subscription=[],this.create=(v=this.setupService)=>{v.setObject(new se.Wj)},this.url=this.activatedRoute.snapshot.pathFromRoot.map(v=>v.routeConfig?.path).join("/"),this.url.includes("empresas/editar")?this.isEditPage=!0:(this.isEditPage=!1,this.columns=this.columns.filter(v=>"ativo"!=v.field));var S=this.empresaService.empresa.subscribe(v=>this.objeto=v);this.subscription.push(S);var g=this.table.loading.subscribe(v=>this.loading=v);this.subscription.push(g);var x=this.table.selected.subscribe(v=>{this.tableLinks=[],v&&(this.tableLinks.push({label:"Editar",routePath:["editar"],paramsFieldName:["id"]}),this.tableLinks.push(v.registroNaoSalvo?{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}:{label:v.ativo?"Desabilitar":"Habilitar",routePath:[v.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]}),this.tableLinks=this.table.encryptParams(this.tableLinks))});this.subscription.push(x)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}next(){if(this.menuItems.erro=[],!(this.objeto.nome.trim()&&this.objeto.cnpj.toString().trim()&&this.objeto.cnpj&&this.objeto.email.trim()))return this.menuItems.erro.push("Dados cadastrais inv\xe1lidos."),void this.toastr.error("Dados cadastrais inv\xe1lidos.");let t=Object.assign({},JSON.parse(JSON.stringify(this.objeto)));t.produto=t.produto.map(a=>(delete a.empresa,a.registroNaoSalvo&&(a.id=0),a)),t.carteiraSetup.map(a=>(a.registroNaoSalvo&&(a.id=0),a.carteiraProdutoRel.map(s=>(a.registroNaoSalvo&&(s.carteiraSetup_Id=0),s)),a)),t.cliente.filter(a=>a.registroNaoSalvo).map(a=>(delete a.empresa,a.registroNaoSalvo&&(a.id=0),a)),t.account.filter(a=>a.registroNaoSalvo).map(a=>(a.registroNaoSalvo&&(a.id=0),a)),this.url.includes("empresas/cadastrar")?(0,_.n)(this.empresaService.create(t)).then(a=>{(0,_.n)(this.empresaService.getList()),this.modal.voltar(["empresas"],{})}).catch(a=>this.menuItems.erro.push((0,E.b)(a))):this.url.includes("empresas/editar")&&(0,_.n)(this.empresaService.edit(t)).then(a=>{(0,_.n)(this.empresaService.getList()),this.modal.voltar(["empresas"],{})}).catch(a=>this.menuItems.erro.push((0,E.b)(a)))}previous(){this.router.navigate(["..","produtos"],{relativeTo:this.activatedRoute})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.P),e.Y36(u.F0),e.Y36(u.gz),e.Y36(y.i),e.Y36(P.w),e.Y36(U.s),e.Y36(A._W),e.Y36(H.A),e.Y36(k.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-setup-create"]],decls:21,vars:17,consts:[[1,"card"],[1,"card-header","d-flex","align-items-center","py-2"],[1,"title-icon"],[1,"pi","pi-wallet"],[1,"card-header-title"],[1,"card-header-subtitle"],[1,"card-body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"],[1,"ms-auto"],["class","text-danger",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","px-2","mt-auto"],["title","Anteiror",1,"btn","btn-step","btn-step-prev","mt-2",3,"click"],[3,"icon"],[1,"btn-step-text"],["class","btn btn-step btn-step-next mt-2","title","Pr\xf3ximo",3,"disabled","click",4,"ngIf"],[1,"text-danger"],["title","Pr\xf3ximo",1,"btn","btn-step","btn-step-next","mt-2",3,"disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"div")(5,"h3",4),e._uU(6,"Carteira Setup"),e.qZA(),e.TgZ(7,"p",5)(8,"small"),e._uU(9,"Inclua um ou mais setups dessa empresa"),e.qZA()()()(),e.TgZ(10,"div",6),e._UZ(11,"app-list-shared",7),e.TgZ(12,"div",8),e.YNc(13,ot,2,1,"p",9),e.qZA(),e.TgZ(14,"div",10)(15,"button",11),e.NdJ("click",function(){return a.previous()}),e._UZ(16,"fa-icon",12),e.TgZ(17,"span",13),e._uU(18,"Anterior"),e.qZA()(),e.YNc(19,rt,4,2,"button",14),e.qZA()()(),e._UZ(20,"router-outlet")),2&t&&(e.xp6(11),e.Q6J("createLink",e.DdM(16,lt))("onCreate",a.create)("canCreate",!0)("list",a.objeto.carteiraSetup)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("canCreate",!0)("columns",a.columns)("tableLinks",a.tableLinks)("selectable",!0),e.xp6(2),e.Q6J("ngForOf",a.menuItems.erro),e.xp6(3),e.Q6J("icon",a.faArrowLeft),e.xp6(3),e.Q6J("ngIf",!a.isEditPage))},dependencies:[T.sg,T.O5,u.lC,L.o,Z.BN]}),i})();var pt=o(4458),dt=o(5623),ut=o(4115),oe=o(8811),mt=o(7119);let re=(()=>{class i{constructor(t,a,s,c){var l=this;this.activatedRoute=t,this.modal=a,this.empresaService=s,this.crypto=c,this.faTimes=p.NBC,this.modalOpen=!1,this.erro=[],this.loading=!1,this.url="",this.objeto=new b.oW,this.subscription=[],this.routerBack=["../../"],this.routeBackOptions={relativeTo:this.activatedRoute};var d=this.modal.getOpen().subscribe(h=>this.modalOpen=h);this.subscription.push(d),this.url=this.activatedRoute.snapshot.pathFromRoot.map(h=>h.routeConfig?.path).join("/");var m=t.params.subscribe(function(){var h=(0,D.Z)(function*(r){r.empresa_id?(l.objeto.id=l.crypto.decrypt(r.empresa_id),l.objeto=yield(0,_.n)(l.empresaService.get(l.objeto.id))):l.voltar()});return function(r){return h.apply(this,arguments)}}());this.subscription.push(m),setTimeout(()=>{this.modal.setOpen(!0)},200)}ngOnDestroy(){this.subscription.forEach(t=>t.unsubscribe())}voltar(){this.modal.voltar(this.routerBack,this.routeBackOptions)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.gz),e.Y36(k.Q),e.Y36(C.P),e.Y36(P.w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-deactivated"]],decls:5,vars:4,consts:[[1,"modal"],[1,"modal__bg",3,"click"],[1,"modal__inner",2,"max-width","600px"],[1,"modal__content"],[3,"objeto","service"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return a.voltar()}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3),e._UZ(4,"app-shared-deactivated",4),e.qZA()()()),2&t&&(e.ekj("active",a.modalOpen),e.xp6(4),e.Q6J("objeto",a.objeto)("service",a.empresaService))},dependencies:[mt.T]}),i})();const ht=[{path:"",component:Se,title:"Planner - Empresas",children:[{path:"habilitar/:empresa_id",component:re,title:"Planner - Habilitar empresa"},{path:"desabilitar/:empresa_id",component:re,title:"Planner - Desabilitar empresa"},{path:"excluir/:empresa_id",component:ye,title:"Planner - Excluir empresa"}]},{path:"editar/:empresa_id",redirectTo:"editar/:empresa_id/dados-cadastrais",pathMatch:"prefix"},{path:"editar/:empresa_id",component:je,title:"Planner - Editar empresa",children:[{path:"dados-cadastrais",component:$},{path:"clientes",component:Be,children:[{path:"cadastrar",component:He.G},{path:"editar/:cliente_id",component:Ge.F},{path:"excluir/:cliente_id",component:ze.T},{path:"habilitar/:cliente_id",component:K.T,title:"Planner - Habilitar cliente"},{path:"desabilitar/:cliente_id",component:K.T,title:"Planner - Desabilitar cliente"}]},{path:"produtos",component:it,children:[{path:"cadastrar",component:at.G,data:{page:"cadastrar-produto-nova-empresa"}},{path:"editar/:produto_id",component:nt.F},{path:"excluir/:produto_id",component:st.T},{path:"habilitar/:produto_id",component:ne.T,title:"Planner - Habilitar produto"},{path:"desabilitar/:produto_id",component:ne.T,title:"Planner - Desabilitar produto"}]},{path:"usuarios",component:$e,children:[{path:"cadastrar",component:Xe.G},{path:"editar/:usuario_id",component:Ke.F},{path:"excluir/:usuario_id",component:et.T},{path:"habilitar/:usuario_id",component:ie.T,title:"Planner - Habilitar usuario"},{path:"desabilitar/:usuario_id",component:ie.T,title:"Planner - Desabilitar usuario"}]},{path:"setup/cadastrar",component:pt.G,canActivate:[qe]},{path:"setup/editar/:setup_id",component:dt.F},{path:"setup",component:ct,children:[{path:"excluir/:setup_id",component:ut.T},{path:"habilitar/:setup_id",component:oe.T,title:"Planner - Habilitar setup"},{path:"desabilitar/:setup_id",component:oe.T,title:"Planner - Desabilitar setup"}]}]},{path:"cadastrar",redirectTo:"cadastrar/dados-cadastrais",title:"Planner - Cadastrar empresa",pathMatch:"prefix"},{path:"cadastrar",component:be,title:"Planner - Cadastrar empresa",children:[{path:"dados-cadastrais",component:$}]}];let ft=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.Bz.forChild(ht),u.Bz]}),i})();var gt=o(7318),vt=o(1236);let Zt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[T.ez,w.m8]}),i})();var xt=o(1327);let yt=(()=>{class i{constructor(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-empresas"]],decls:2,vars:0,template:function(t,a){1&t&&(e.TgZ(0,"p"),e._uU(1,"empresas works!"),e.qZA())}}),i})();var jt=o(7864),At=o(4698),St=o(5593);let kt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i,bootstrap:[yt]}),i.\u0275inj=e.cJS({imports:[T.ez,ft,gt.U$,Z.uH,A.Rh,f.u5,z.dT,V.yI.forChild(),vt.q,Zt,jt.m,At.E,xt.$9,St.hJ]}),i})()}}]);