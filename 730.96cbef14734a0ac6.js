"use strict";(self.webpackChunkplanner=self.webpackChunkplanner||[]).push([[730],{6886:(A,h,t)=>{t.d(h,{Dw:()=>O,a7:()=>T});var l=t(655),p=t(43),f=t(805),r=t(1956),D=t(1442),S=t(5669),I=t(316),C=t(5897);class T extends C.D{constructor(){super(...arguments),this.id=void 0,this.descricao="",this.empresa_Id=void 0,this.tipoAtivo_Id=void 0,this.tipoAtivo=new D.m,this.tipoRisco_Id=void 0,this.tipoRisco=new I.p,this.tipoLiquidez_Id=void 0,this.tipoLiquidez=new S.T,this.registroNaoSalvo=!1}}(0,l.gn)([(0,p.Vp)(),(0,l.w6)("design:type",Boolean)],T.prototype,"registroNaoSalvo",void 0);var O=[{field:"id",header:"Id",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS},{field:"descricao",header:"Nome",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS},{field:"tipoAtivo.nome",header:"Ativo",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"tipoRisco.nome",header:"Risco",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"tipoLiquidez.nome",header:"Liquidez",maskType:r.O.undefined,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!0,filterShowMatchMode:!0,filterMatchMode:f.a6.CONTAINS},{field:"ativo",header:"Ativo",maskType:r.O.boolean,filterType:r.vA.text,filterDisplay:r.w2.menu,filterShowAddButton:!1,filterShowMatchMode:!1,filterMatchMode:f.a6.CONTAINS,booleanValues:{true:"ativo",false:"inativo"}}]},1442:(A,h,t)=>{t.d(h,{m:()=>l});class l{constructor(){this.id=void 0,this.nome=""}}},5669:(A,h,t)=>{t.d(h,{T:()=>l});class l{constructor(){this.id=void 0,this.nome=""}}},316:(A,h,t)=>{t.d(h,{p:()=>l});class l{constructor(){this.id=void 0,this.nome="",this.percentualDisponivel=0}}},9179:(A,h,t)=>{t.r(h),t.d(h,{ProdutosModule:()=>L});var l=t(6895),p=t(202),f=t(8446),r=t(4163),D=t(9899),S=t(343),I=t(5861),C=t(801),T=t(9808),R=t(9398),O=t(6886),g=t(9876),b=t(8913),y=t(9885),m=t(46),i=t(4650),B=t(453),U=t(8944),_=t(3868);function W(o,c){1&o&&i._UZ(0,"app-empresa-select")}const e=function(){return["cadastrar"]},d=[{path:"",component:(()=>{class o{constructor(a,v,K,x){var N=this;this.empresaService=a,this.produtoService=v,this.table=K,this.accountService=x,this.faHandHoldingDollar=C.VPG,this.empresaSelected=new R.oW,this.columns=O.Dw,this.list=[],this.tableLinks=[],this.subscription=[],this.create=(u=this.produtoService)=>{u.setObject(new O.a7)};var z=this.accountService.account.subscribe(u=>this.account=u),F=this.produtoService.list.subscribe(u=>{this.list=u,this.list.filter(P=>61==P.id).forEach(P=>{P.showMenuOption=!1,P.canSelect=!1})});this.table.currentPage.next(1);var j=this.empresaService.empresa.subscribe(function(){var u=(0,I.Z)(function*(P){N.empresaSelected=P,0!=P.id&&(yield(0,T.n)(N.produtoService.getList()))});return function(P){return u.apply(this,arguments)}}()),Z=this.table.selected.subscribe(u=>{u&&"Conta Corrente"!=u.descricao?(this.tableLinks=[{label:"Editar",routePath:["editar"],paramsFieldName:["id"]},{label:u.ativo?"Desabilitar":"Habilitar",routePath:[u.ativo?"desabilitar":"habilitar"],paramsFieldName:["id"]},{label:"Excluir",routePath:["excluir"],paramsFieldName:["id"]}],this.tableLinks=this.table.encryptParams(this.tableLinks)):u&&"Conta Corrente"!=u.descricao?this.table.onRowUnselect(u):this.tableLinks=[]});this.subscription.push(z),this.subscription.push(F),this.subscription.push(j),this.subscription.push(Z)}ngOnDestroy(){this.subscription.forEach(a=>a.unsubscribe())}}return o.\u0275fac=function(a){return new(a||o)(i.Y36(b.P),i.Y36(y.m),i.Y36(m.i),i.Y36(g.B))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-list-produtos"]],decls:17,vars:16,consts:[[1,"page"],[1,"page__header"],[1,"title-icon"],[3,"icon"],[1,"mr-auto"],[1,"page__header-title"],[1,"page__header-subtitle"],[1,"ml-auto","mb-0","col-xl-3","col-lg-4","col-md-5","col-sm-5","col-12","px-0"],[4,"ngIf"],[1,"page__body"],[3,"createLink","onCreate","canCreate","list","filterLink","filterTable","paginator","sortTable","menuTable","columns","tableLinks","selectable"]],template:function(a,v){1&a&&(i.TgZ(0,"div",0)(1,"div",1)(2,"span",2),i._UZ(3,"fa-icon",3),i.qZA(),i.TgZ(4,"div",4)(5,"h3",5),i._uU(6,"Produtos"),i.qZA(),i.TgZ(7,"p",6)(8,"small"),i._uU(9,"Produtos cadastrados em "),i.TgZ(10,"strong"),i._uU(11),i.qZA()()()(),i.TgZ(12,"div",7),i.YNc(13,W,1,0,"app-empresa-select",8),i.qZA()(),i.TgZ(14,"div",9),i._UZ(15,"app-list-shared",10),i.qZA()(),i._UZ(16,"router-outlet")),2&a&&(i.xp6(3),i.Q6J("icon",v.faHandHoldingDollar),i.xp6(8),i.Oqu(v.empresaSelected.nome),i.xp6(2),i.Q6J("ngIf",v.account&&1==v.account.perfilAcesso_Id),i.xp6(2),i.Q6J("createLink",i.DdM(15,e))("onCreate",v.create)("canCreate",!0)("list",v.list)("filterLink",!1)("filterTable",!0)("paginator",!0)("sortTable",!0)("menuTable",!0)("columns",v.columns)("tableLinks",v.tableLinks)("selectable",!0))},dependencies:[l.O5,p.lC,B.o,U.l,_.BN]}),o})(),title:"Planner - Produtos",children:[{path:"cadastrar",component:f.G,title:"Planner - Cadastrar produto"},{path:"editar/:produto_id",component:S.F,title:"Planner - Editar produto"},{path:"excluir/:produto_id",component:D.T,title:"Planner - Excluir produto"},{path:"habilitar/:produto_id",component:r.T,title:"Planner - Habilitar produto"},{path:"desabilitar/:produto_id",component:r.T,title:"Planner - Desabilitar produto "}]}];let n=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=i.oAB({type:o}),o.\u0275inj=i.cJS({imports:[p.Bz.forChild(d),p.Bz]}),o})(),E=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-produtos"]],decls:1,vars:0,template:function(a,v){1&a&&i._UZ(0,"router-outlet")},dependencies:[p.lC]}),o})();var M=t(7864);let L=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=i.oAB({type:o,bootstrap:[E]}),o.\u0275inj=i.cJS({imports:[l.ez,n,M.m,_.uH]}),o})()},9885:(A,h,t)=>{t.d(h,{m:()=>U});var l=t(529),p=t(1135),f=t(4004),r=t(9243),D=t(2340),S=t(9535),I=t(9398),C=t(8913),T=t(46),R=t(6886),O=t(1685),g=t(9876),b=t(4409),y=t(1939),m=t(4650),i=t(202),B=t(7185);let U=(()=>{class _{constructor(e,s,d,n,E,M,L,o,c){this.router=e,this.table=s,this.http=d,this.toastr=n,this.crypto=E,this.dropdownService=M,this.empresaService=L,this.accountService=o,this.urlBackendService=c,this.url=D.N.url,this.list=new p.X([]),this.objeto=new p.X(void 0),this.carteiraSetup=new p.X([]),this.empresa=new I.oW,this.account=new O.mR,this.urlBackendService.url.subscribe(a=>this.url=a),this.empresa=this.empresaService.object,this.empresaService.empresa.subscribe(a=>this.empresa=a),this.accountService.account.subscribe(a=>this.account=a??new O.mR)}getObject(){var e=localStorage.getItem("produto");return e&&this.setObject(this.crypto.decrypt(e)??new R.a7),this.objeto}setObject(e){localStorage.setItem("produto",this.crypto.encrypt(e)??""),this.objeto.next(e)}add_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let n=this.dropdownService.tipoAtivo.value.find(o=>o.id==e.tipoAtivo_Id);if(!n)return this.toastr.error("Selecione um tipo de ativo v\xe1lido!!"),!1;e.tipoAtivo=n;let E=this.dropdownService.tipoRisco.value.find(o=>o.id==e.tipoRisco_Id);if(!E)return this.toastr.error("Selecione um tipo de risco v\xe1lido!!"),!1;e.tipoRisco=E;let M=this.dropdownService.tipoLiquidez.value.find(o=>o.id==e.tipoLiquidez_Id);if(!M)return this.toastr.error("Selecione um tipo de liquidez v\xe1lido!!"),!1;e.tipoLiquidez=M,s.sort((o,c)=>o.id-c.id);var d=0==s.length?0:s[s.length-1].id;e.id=++d,e.registroNaoSalvo=!0;let L=Object.assign({},e);return s.push(L),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"add_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),this.table.resetSelection(),!0}return this.toastr.error("Nenhuma empresa selecionada."),!1}edit_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let d=s.findIndex(n=>n.id==e.id);if(-1!=d){let n=this.dropdownService.tipoAtivo.value.find(o=>o.id==e.tipoAtivo_Id);if(!n)return this.toastr.error("Selecione um tipo de ativo v\xe1lido!!"),!1;e.tipoAtivo=n;let E=this.dropdownService.tipoRisco.value.find(o=>o.id==e.tipoRisco_Id);if(!E)return this.toastr.error("Selecione um tipo de risco v\xe1lido!!"),!1;e.tipoRisco=E;let M=this.dropdownService.tipoLiquidez.value.find(o=>o.id==e.tipoLiquidez_Id);if(!M)return this.toastr.error("Selecione um tipo de liquidez v\xe1lido!!"),!1;e.tipoLiquidez=M;let L=Object.assign({},e);return s.splice(d,1,L),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"edit_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),!0}return this.toastr.error("Produto n\xe3o encontrado!!"),!1}return this.toastr.error("Nenhuma empresa selecionada."),!1}delete_To_Empresa_List(e){if(this.empresa){var s=this.empresa.produto??[];let d=s.findIndex(n=>n.id==e);return-1!=d?(s.splice(d,1),this.empresa.produto=s,this.empresaService.setObject(this.empresa,"delete_To_Empresa_List"),this.toastr.success("Opera\xe7\xe3o conclu\xedda"),this.table.resetSelection(),!0):(this.toastr.error("Produto n\xe3o encontrado!!"),!1)}return this.toastr.error("Nenhuma empresa selecionada."),!1}getList(e,s){return this.table.loading.next(!0),this.http.get(`${this.url}/produto/all/${e=e??(this.account.perfilAcesso_Id!=b.u.Admin?this.account.empresa_Id:this.empresa.id)}/${s=s??""}`,{headers:new l.WM({loading:"false"})}).pipe((0,f.U)(d=>(d=d.map(n=>(n.ativo=!n.dataDesativado,n)),this.list.next(d),d)))}get(e){return this.http.get(`${this.url}/produto/${e}`,{headers:new l.WM({loading:"true"})})}create(e){return this.http.post(`${this.url}/produto/${this.account.perfilAcesso_Id!=b.u.Admin?this.account.empresa_Id:this.empresa.id}`,e)}edit(e){return this.http.put(`${this.url}/produto/`,e)}deactivated(e,s){return this.http.patch(`${this.url}/produto/${e}/${s}`,{})}delete(e){return this.http.delete(`${this.url}/produto/${e}`)}}return _.\u0275fac=function(e){return new(e||_)(m.LFG(i.F0),m.LFG(T.i),m.LFG(l.eN),m.LFG(B._W),m.LFG(r.w),m.LFG(S.V),m.LFG(C.P),m.LFG(g.B),m.LFG(y.j))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);