<div class="modal__content">
    <div class="modal__header pb-2" style="padding: 0 25px;">
        <div class="d-flex align-items-center justify-content-between flex-wrap w-100">
            <a class="link text-dark" (click)="voltar()">
                <fa-icon class="mr-1" [icon]="faChevronLeft"></fa-icon> Voltar </a>
        </div>
        <h3 class="text-orange mt-1">Planner</h3>
    </div>
    <div class="modal__body mt-0">
        <form #form="ngForm" class="home editable editable-readonly" novalidate>
            <div class="form-row mb-2">
                <div class="col-lg-8 col-md-8 col-sm-12">
                    <!-- Dados Cadastrais -->
                    <div class="form-row mb-2">
                        <div class="card card-body">
                            <div class="home__container-header mb-2">
                                <h6>Dados Cadastrais</h6>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-lg-5 col-md-5 col-sm-12">
                                    <label for="nome">Nome Completo:</label>
                                    <input type="text"
                                           name="nome"
                                           id="nome"
                                           class="form-control"
                                           [ngModel]="planner.cliente.nome"
                                           readonly>
                                </div>
                                <div class="form-group col-lg-3 col-md-3 col-sm-12">
                                    <label for="perfilInvestidor">Perfil de Investidor:</label>
                                    <input type="text"
                                           name="perfilInvestidor"
                                           id="perfilInvestidor"
                                           class="form-control"
                                           [ngModel]="planner.cliente.perfilInvestidor?.descricao"
                                           readonly>
                                </div>
                                <div class="form-group col-lg-4 col-md-4 col-sm-12">
                                    <label for="estadoCivil">Estado Civil:</label>
                                    <input type="text"
                                           name="estadoCivil"
                                           id="estadoCivil"
                                           class="form-control"
                                           [ngModel]="planner.cliente.estadoCivil?.descricao"
                                           readonly>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-lg-3 col-md-3 col-sm-6 col-6">
                                    <label for="cpf">CPF:</label>
                                    <input type="text"
                                           name="cpf"
                                           id="cpf"
                                           class="form-control"
                                           [ngModel]="planner.cliente.cpf"
                                           mask="000.000.000-00"
                                           placeholder="000.000.000-00"
                                           readonly>
                                </div>
                                <div class="form-group col-lg-3 col-md-3 col-sm-6 col-6">
                                    <label for="rg">RG:</label>
                                    <input type="text"
                                           name="rg"
                                           id="rg"
                                           class="form-control"
                                           [ngModel]="planner.cliente.rg"
                                           mask="00.000.000-0"
                                           placeholder="00.000.000-0"
                                           readonly>
                                </div>
                                <div class="form-group col-lg-4 col-md-4 col-sm-6 col-6">
                                    <label for="dataNascimento">Data de Nascimento:</label>
                                    <input type="date"
                                           name="dataNascimento"
                                           id="dataNascimento"
                                           class="form-control"
                                           [ngModel]="planner.cliente.dataNascimento"
                                           readonly>
                                </div>
                                <div class="form-group col-lg-2 col-md-2 col-sm-6 col-6">
                                    <label for="idade">Idade:</label>
                                    <input type="text"
                                           name="idade"
                                           id="idade"
                                           class="form-control form-control-number"
                                           [ngModel]="planner.cliente.idade"
                                           mask="0*"
                                           suffix=" anos"
                                           readonly>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label for="email">E-mail:</label>
                                    <input type="text"
                                           name="email"
                                           id="email"
                                           class="form-control"
                                           [ngModel]="planner.cliente.email"
                                           readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row mb-2">
                        <!-- Valores -->
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 pl-0 pr-0">
                            <div class="home__container ">
                                <div class="home__container-header mb-2">
                                    <h6>Valores</h6>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-lg-6 col-md-6 col-sm-12 d-lg-block d-md-block">
                                        <label for="receita">Receita:</label>
                                        <input type="text"
                                               class="form-control"
                                               id="receita"
                                               name="receita"
                                               [ngModel]="planner.cliente.receita"
                                               mask="separator"
                                               thousandSeparator="."
                                               decimalMarker=","
                                               prefix="R$ "
                                               readonly>
                                    </div>
                                    <div class="form-group col-lg-6 col-md-6 col-sm-12">
                                        <label for="despesa">Despesas:</label>
                                        <input type="text"
                                               class="form-control"
                                               id="despesa"
                                               name="despesa"
                                               [ngModel]="planner.cliente.despesa"
                                               mask="separator"
                                               thousandSeparator="."
                                               decimalMarker=","
                                               prefix="R$ "
                                               readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Taxas -->
                        <div class="col-lg-6 col-md-6 col-sm-12 col-12 pr-0 pl-0">
                            <div class="home__container">
                                <div class="home__container-header mb-2">
                                    <h6>Taxas</h6>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-lg-6 col-md-6 col-sm-12 d-lg-block d-md-block">
                                        <label for="taxaSelic">Taxa Selic:</label>
                                        <input type="text"
                                               class="form-control"
                                               id="taxaSelic"
                                               name="taxaSelic"
                                               [ngModel]="planner.taxaSelic"
                                               mask="separator"
                                               thousandSeparator="."
                                               decimalMarker=","
                                               suffix="%"
                                               readonly>
                                    </div>
                                    <div class="form-group col-lg-6 col-md-6 col-sm-12">
                                        <label for="taxaIpca">Taxa IPCA:</label>
                                        <input type="text"
                                               class="form-control"
                                               id="taxaIpca"
                                               name="taxaIpca"
                                               [ngModel]="planner.taxaIpca"
                                               mask="separator"
                                               thousandSeparator="."
                                               decimalMarker=","
                                               suffix="%"
                                               readonly>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Capacidade de Risco -->
                    <div class="form-row mb-2">
                        <div class="card card-body">
                            <div class="home__container-header mb-4">
                                <h6>Capacidade de Risco</h6>
                            </div>
                            <div class="form-row">
                                <div class="col-lg-6 col-md-6 col-sm-12 col-12 px-0">
                                    <div class="form-container">
                                        <div class="form-container-title font-weight-bold">Reserva de Emergência</div>
                                        <div class="form-container-body">
                                            <div class="form-group col-lg-6 col-md-6 col-sm-6 pr-1">
                                                <label for="rE_Sugerido"> Sugerida:</label>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="rE_Sugerido"
                                                       name="rE_Sugerido"
                                                       [ngModel]="planner.rE_Sugerido"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       placeholder="R$ 00,00"
                                                       prefix="R$ "
                                                       readonly>
                                            </div>
                                            <div class="form-group col-lg-6 col-md-6 col-sm-6 pr-0">
                                                <label for="rE_Planejado"> Planejada:</label>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="rE_Planejado"
                                                       name="rE_Planejado"
                                                       [ngModel]="planner.rE_Planejado"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       placeholder="R$ 00,00"
                                                       prefix="R$ "
                                                       readonly>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12 col-12 px-0">
                                    <div class="form-container mb-0">
                                        <div class="form-container-title font-weight-bold">Risco</div>
                                        <div class="form-container-body">
                                            <div class="form-group col-lg-6 col-md-6 col-sm-6 pr-1">
                                                <label for="riscoAssumido"> Assumido:</label>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="riscoAssumido"
                                                       name="riscoAssumido"
                                                       [ngModel]="planner.riscoAssumido"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       placeholder="R$ 00,00"
                                                       suffix="%"
                                                       readonly>
                                            </div>
                                            <div class="form-group col-lg-6 col-md-6 col-sm-6 pr-0">
                                                <label for="riscoTolerado"> Tolerado:</label>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="riscoTolerado"
                                                       name="riscoTolerado"
                                                       [ngModel]="planner.riscoTolerado"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       placeholder="R$ 00,00" suffix="%"
                                                       suffix="%"
                                                       readonly>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-12 col-12">
                    <!-- Descrição -->
                    <div class="form-row mb-2">
                        <div class="card card-body">
                            <div class="home__container-header mb-2">
                                <h6>Descrição</h6>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label for="descricao">Observações do planner:</label>
                                    <textarea type="text"
                                              name="descricao"
                                              id="descricao"
                                              class="form-control"
                                              [ngModel]="planner.descricao"
                                              readonly>
                                        </textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Analista responsável -->
                    <div class="form-row mb-2">
                        <div class="card card-body">
                            <div class="home__container-header mb-2">
                                <h6>Analista responsável</h6>
                            </div>
                            <div class="form-row">
                                <div class="form-group col-lg-12 col-md-12 col-sm-12">
                                    <label for="account">Analista responsável: <span class="text-danger">*</span></label> 
                                    <input type="text" *ngIf="account?.perfilAcesso_Id == 3"
                                            class="form-control"
                                            id="account"
                                            name="account"
                                            #_account="ngModel"
                                            [(ngModel)]="planner.account.name"
                                            readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Aposentadoria -->
                    <div class="form-row mb-2">
                        <div class="home__container table-responsive mb-2">
                            <table class="table table-editable w-100 d-md-table d-sm-table mb-0">
                                <thead class="primary">
                                    <tr>
                                        <th></th>
                                        <th>Aposentadoria</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="bg-light px-3 text-right" style="white-space: nowrap;">
                                            <small><b>Idade</b></small>
                                        </td>
                                        <td>
                                            <input type="text"
                                                   class="form-control form-control-number"
                                                   id="idadeAposentadoria"
                                                   name="idadeAposentadoria"
                                                   [ngModel]="planner.cliente.idadeAposentadoria"
                                                   mask="0*"
                                                   suffix=" anos"
                                                   readonly>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="bg-light px-3 text-right" style="white-space: nowrap;">
                                            <small><b>Renda Mensal</b></small>
                                        </td>
                                        <td>
                                            <input type="text"
                                                   class="form-control form-control-number"
                                                   id="rendaMensalAposentadoria"
                                                   name="rendaMensalAposentadoria"
                                                   [ngModel]="planner.cliente.rendaMensalAposentadoria"
                                                   mask="separator.5"
                                                   thousandSeparator="."
                                                   decimalMarker=","
                                                   prefix="R$ "
                                                   placeholder="R$ 00,00"
                                                   readonly>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="bg-light px-3 text-right" style="white-space: nowrap;">
                                            <small><b>Rentabilidade</b></small>
                                        </td>
                                        <td>
                                            <input type="text"
                                                   class="form-control form-control-number"
                                                   id="rentabilidadeAposentadoria"
                                                   name="rentabilidadeAposentadoria"
                                                   [ngModel]="planner.cliente.rentabilidadeAposentadoria"
                                                   mask="separator.5"
                                                   thousandSeparator="."
                                                   decimalMarker=","
                                                   suffix="%"
                                                   placeholder="0,00%"
                                                   readonly>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Fluxos Pontuais -->
                    <div class="form-row mb-2">
                        <div class="home__container table-responsive mb-2">
                            <table class="table table-editable w-100 mb-0">
                                <thead class="primary">
                                    <tr>
                                        <th colspan="3" class="pl-4">
                                            <p class="text-center d-flex align-items-center"> Fluxos Pontuais </p>
                                        </th>
                                    </tr>
                                    <tr class="subheader">
                                        <th class="pl-4">Idade</th>
                                        <th>Valor</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of planner.planejamentoFluxosPontuais; index as i;">
                                        <td class="pl-4">
                                            <input type="text"
                                                   class="form-control form-control-number"
                                                   id="idade-{{i}}"
                                                   name="idade-{{i}}"
                                                   [ngModel]="item.idade"
                                                   mask="0*"
                                                   suffix=" anos"
                                                   readonly>
                                        </td>
                                        <td>
                                            <input type="text"
                                                   class="form-control form-control-number"
                                                   id="valor{{i}}"
                                                   name="valor{{i}}"
                                                   [ngModel]="item.valor"
                                                   mask="separator.5"
                                                   thousandSeparator="."
                                                   decimalMarker=","
                                                   placeholder="R$ 00,00"
                                                   prefix="R$ "
                                                   readonly>
                                        </td>
                                        <td class="text-center"></td>
                                    </tr>
                                    <tr *ngIf="planner.planejamentoFluxosPontuais.length == 0">
                                        <td class="py-2 pl-4 text-grey" colspan="3">Nenhum registro</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                    <!-- Cálculos -->
                    <div class="form-row mb-2">
                        <div class="home__container">
                            <div class="home__container-header mb-2">
                                <h6>Cálculos</h6>
                            </div>
                            <div class="form-row">
                                <table class="table table-editable table-responsive">
                                    <thead class="primary">
                                        <tr>
                                            <th></th>
                                            <th>Baixíssimo</th>
                                            <th>Baixo</th>
                                            <th>Moderado</th>
                                            <th>Arrojado</th>
                                            <th style="white-space: nowrap;">Super Arrojado</th>
                                            <th>Hedge</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="px-3 bg-light text-right"><small><b>Sugestão</b></small></td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Baixissimo"
                                                       name="sugestao_Baixissimo"
                                                       [ngModel]="planner.sugestao_Baixissimo"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Baixo"
                                                       name="sugestao_Baixo"
                                                       [ngModel]="planner.sugestao_Baixo"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Moderado"
                                                       name="sugestao_Moderado"
                                                       [ngModel]="planner.sugestao_Moderado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Arrojado"
                                                       name="sugestao_Arrojado"
                                                       [ngModel]="planner.sugestao_Arrojado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_SuperArrojado"
                                                       name="sugestao_SuperArrojado"
                                                       [ngModel]="planner.sugestao_SuperArrojado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Hedge"
                                                       name="sugestao_Hedge"
                                                       [ngModel]="planner.sugestao_Hedge"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="sugestao_Total"
                                                       name="sugestao_Total"
                                                       [ngModel]="planner.sugestao_Total"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 bg-light text-right"><small><b>Plano</b></small></td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Baixissimo"
                                                       name="plano_Baixissimo"
                                                       [ngModel]="planner.plano_Baixissimo"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Baixo"
                                                       name="plano_Baixo"
                                                       [ngModel]="planner.plano_Baixo"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Moderado"
                                                       name="plano_Moderado"
                                                       [ngModel]="planner.plano_Moderado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Arrojado"
                                                       name="plano_Arrojado"
                                                       [ngModel]="planner.plano_Arrojado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_SuperArrojado"
                                                       name="plano_SuperArrojado"
                                                       [ngModel]="planner.plano_SuperArrojado"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Hedge"
                                                       name="plano_Hedge"
                                                       [ngModel]="planner.plano_Hedge"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="plano_Total"
                                                       name="plano_Total"
                                                       [ngModel]="planner.plano_Total"
                                                       mask="separator"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Investimento -->
                    <div class="form-row mb-2">
                        <div class="home__container">
                            <div class="home__container-header mb-2 position-relative">
                                <h6>Investimentos</h6>
                            </div>
                            <div class="form-row">
                                <p-table [value]="planner.planejamentoInvestimento"
                                         [responsive]="true"
                                         responsiveLayout="scroll"
                                         class="table table-editable"
                                         emptyMessage="Nenhum registro">
                                    <ng-template pTemplate="header">
                                        <tr class="primary">
                                            <th class="text-right">Investimento</th>
                                            <th style="white-space: nowrap;">Custos/Taxas</th>
                                            <th style="white-space: nowrap;">Rentab. Bruta</th>
                                            <th style="white-space: nowrap;">Rentab. Liquida</th>
                                            <th style="white-space: nowrap;">Montante Atual</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-item let-index="rowIndex">
                                        <tr>
                                            <td class="px-3 bg-light text-right" style="white-space: nowrap;">
                                                <span class="small font-weight-bold">{{ item.investimento.descricao}}</span>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="investimento-custosTaxas-'{{index}}"
                                                       name="investimento-custosTaxas-'{{index}}"
                                                       [ngModel]="item.custosTaxas"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="investimento-rentabilidade-'{{index}}"
                                                       name="investimento-rentabilidade-'{{index}}"
                                                       [ngModel]="item.rentabilidade"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="investimento-rentabilidadeLiquida-'{{index}}"
                                                       name="investimento-rentabilidadeLiquida-'{{index}}"
                                                       [ngModel]="item.rentabilidadeLiquida"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="investimento-montanteAtual-'{{index}}"
                                                       name="investimento-montanteAtual-'{{index}}"
                                                       [ngModel]="item.montanteAtual"
                                                       mask="separator.2"
                                                       prefix="R$ "
                                                       decimalMarker=","
                                                       readonly>
                                                    </td>
                                            <td></td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="footer">
                                        <tr *ngIf="planner.planejamentoInvestimento.length > 0" class="bg-light" [class.bg-danger]="somaInvestimentos.somaSugerido < 0 || somaInvestimentos.somaPlanoAcao < 0 ">
                                            <td class="px-3 bg-light text-right position-sticky" style="white-space: nowrap;">
                                                <small><b>Total</b></small>
                                            </td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td class="p-2 ps-3">R$ {{ somaInvestimentos.somaMontanteAtual | mask : 'separator.2' : '.' }}</td>
                                            <td></td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage">
                                        <tr>
                                            <td></td>
                                            <td [attr.colspan]="3" class="py-2 px-2 text-grey"> Nenhum registro </td>
                                            <td></td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </div>
                        </div>
                    </div>
                    <!-- Produto -->
                    <div class="form-row mb-2">
                        <div class="home__container">
                            <div class="home__container-header mb-2">
                                <h6>Produtos</h6>
                                <div class="d-flex justify-content-end align-items-center w-100">
                                    <div class="col-lg-4 col-md-5 col-sm-6 col-8 px-0">
                                        <input type="text"
                                               name="carteirasSetup"
                                               id="carteirasSetup"
                                               class="form-control bg-white"
                                               [ngModel]="planner.carteiraSetup.nome"
                                               readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="form-row">
                                <p-table [value]="planner.planejamentoProduto"
                                         [responsive]="true"
                                         responsiveLayout="scroll"
                                         class="table table-editable"
                                         emptyMessage="Nenhum registro">
                                    <ng-template pTemplate="header" let-columns>
                                        <tr class="primary">
                                            <th class="text-right position-sticky" style="white-space: nowrap;">Produto</th>
                                            <th style="white-space: nowrap;">Custos/Taxas</th>
                                            <th style="white-space: nowrap;">Percentual</th>
                                            <th style="white-space: nowrap;">Rentabilidade</th>
                                            <th style="white-space: nowrap;">Rentab. Liquida</th>
                                            <th style="white-space: nowrap;">Montante Sugerido</th>
                                            <th style="white-space: nowrap;">Plano de Ação</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-item let-index="rowIndex">
                                        <tr>
                                            <td class="px-3 bg-light text-right position-sticky" style="white-space: nowrap;">
                                                <small><b>{{ item.produto.descricao }}</b></small>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-custosTaxas-'{{index}}"
                                                       name="produto-custosTaxas-'{{index}}"
                                                       [ngModel]="item.custosTaxas"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-percentual-'{{index}}"
                                                       name="produto-percentual-'{{index}}"
                                                       [ngModel]="item.percentual"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-rentabilidade-'{{index}}"
                                                       name="produto-rentabilidade-'{{index}}"
                                                       [ngModel]="item.rentabilidade"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-rentabilidadeLiquida-'{{index}}"
                                                       name="produto-rentabilidadeLiquida-'{{index}}"
                                                       [ngModel]="item.rentabilidadeLiquida"
                                                       mask="separator.2"
                                                       suffix="%"
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-sugerido-'{{index}}"
                                                       name="produto-sugerido-'{{index}}"
                                                       [ngModel]="item.sugerido"
                                                       mask="separator.2"
                                                       prefix="R$ "
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                            <td style="white-space: nowrap">
                                                <input type="text"
                                                       class="form-control form-control-number"
                                                       id="produto-planoAcao-'{{index}}"
                                                       name="produto-planoAcao-'{{index}}"
                                                       [ngModel]="item.planoAcao"
                                                       mask="separator.2"
                                                       prefix="R$ "
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="footer">
                                        <tr *ngIf="planner.planejamentoProduto.length > 0" class="bg-light" [class.bg-danger]="somaProdutos.somaPercentual < 0 || somaProdutos.somaPercentual > 100 " >
                                            <td class="px-3 bg-light text-right position-sticky" style="white-space: nowrap;">
                                                <small><b>Total</b></small>
                                            </td>
                                            <td></td>
                                            <td class="p-2" style="white-space: nowrap">{{ somaProdutos.somaPercentual | mask : 'separator.2' : '.' }}%</td>
                                            <td></td>
                                            <td></td>
                                            <!-- <td></td> -->
                                            <td class="p-2" style="white-space: nowrap">R$ {{ somaProdutos.somaSugerido | mask : 'separator.2' : '.' }}</td>
                                            <td class="p-2" style="white-space: nowrap">R$ {{ somaProdutos.somaPlanoAcao | mask : 'separator.2' : '.' }}</td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="emptymessage">
                                        <tr>
                                            <td></td>
                                            <td [attr.colspan]="5" class="py-2 px-2 text-grey"> Nenhum registro </td>
                                            <td></td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                            </div>
                        </div>
                    </div>
                    <!-- Solução Inicial -->
                    <div class="form-row mb-2">
                        <div class="home__container">
                            <div class="home__container-header mb-2">
                                <h6>Solução Inicial</h6>
                            </div>
                            <div class="form-row table-responsive mb-2">
                                <table class="table table-editable mb-0">
                                    <thead>
                                        <tr class="primary">
                                            <th colspan="6" class="text-center p-2">
                                                <h6>Agregando Valor</h6>
                                            </th>
                                        </tr>
                                        <tr class="">
                                            <th colspan="2" class="text-right primary">Montante Total</th>
                                            <th class="p-0">
                                                <input type="text"
                                                       class="form-control form-control-solucaoInicial"
                                                       id="solucao_montante_Atual"
                                                       name="solucao_montante_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.montante"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </th>
                                            <th class="primary">Exposição a Risco</th>
                                            <th class="p-0" colspan="2">
                                                <input type="text"
                                                       class="form-control form-control-solucaoInicial"
                                                       id="solucao_riscoAssumido_Atual"
                                                       name="solucao_riscoAssumido_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.riscoAssumido"
                                                       mask="separator.5"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       suffix="%"
                                                       readonly>
                                            </th>
                                        </tr>
                                        <tr class="subheader" class="primary">
                                            <th style="white-space: nowrap;" class="text-right">Carteira</th>
                                            <th style="white-space: nowrap;">Rent. Atual <small>(ano)</small></th>
                                            <th style="white-space: nowrap;">Retorno Anual</th>
                                            <th style="white-space: nowrap;">Retorno Mensal</th>
                                            <th style="white-space: nowrap;">Patrimônio Máximo</th>
                                            <th style="white-space: nowrap;">Tempo <small>(anos)</small></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="px-3 bg-light text-right" style="white-space: nowrap;">
                                                <small>Atual</small>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_rentabilidade_Atual"
                                                       name="solucao_rentabilidade_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.rentabilidade_Atual"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       suffix="%"
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoAnual_Atual"
                                                       name="solucao_retornoAnual_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoAnual_Atual"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoMensal_Atual"
                                                       name="solucao_retornoMensal_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoMensal_Atual"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_plMax_Atual"
                                                       name="solucao_plMax_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.plMax_Atual"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_idadeMax_Atual"
                                                       name="solucao_idadeMax_Atual"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.idadeMax_Atual"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 bg-light text-right" style="white-space: nowrap;">
                                                <small>Sugerida</small>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_rentabilidade_Sugerida"
                                                       name="solucao_rentabilidade_Sugerida"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.rentabilidade_Sugerida"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       suffix="%"
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoAnual_Sugerido"
                                                       name="solucao_retornoAnual_Sugerido"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoAnual_Sugerido"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoMensal_Sugerido"
                                                       name="solucao_retornoMensal_Sugerido"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoMensal_Sugerido"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_plMax_Sugerido"
                                                       name="solucao_plMax_Sugerido"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.plMax_Sugerido"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_idadeMax_Sugerido"
                                                       name="solucao_idadeMax_Sugerido"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.idadeMax_Sugerido"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 bg-light text-right" style="white-space: nowrap;">
                                                <small>Diferença</small>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_rentabilidade_Diferenca"
                                                       name="solucao_rentabilidade_Diferenca"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.rentabilidade_Diferenca"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       suffix="%"
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoAnual_Diferenca"
                                                       name="solucao_retornoAnual_Diferenca"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoAnual_Diferenca"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td>
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_retornoMensal_Diferenca"
                                                       name="solucao_retornoMensal_Diferenca"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.retornoMensal_Diferenca"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td class="border-primary border-left border-top">
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_plMax_Diferenca"
                                                       name="solucao_plMax_Diferenca"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.plMax_Diferenca"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       prefix="R$ "
                                                       readonly>
                                            </td>
                                            <td class="border-primary border">
                                                <input type="text"
                                                       class="form-control"
                                                       id="solucao_idadeMax_Diferenca"
                                                       name="solucao_idadeMax_Diferenca"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.idadeMax_Diferenca"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-3 bg-light text-right" style="white-space: nowrap;">
                                            </td>
                                            <td class="px-3 bg-light text-center" style="white-space: nowrap;" colspan="2">
                                                <span><b>Melhora de Desempenho</b></span>
                                            </td>
                                            <td class="px-3 bg-light text-left">
                                                <span>
                                                    <fa-icon [icon]="faArrowRight"></fa-icon>
                                                </span>
                                            </td>
                                            <td class="border-primary border-left border-bottom">
                                                <input type="text"
                                                       class="form-control h2 mb-0 font-weight-bold"
                                                       style="font-size: 20px"
                                                       id="solucao_pL_Desempenho"
                                                       name="solucao_pL_Desempenho"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.pL_Desempenho"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       suffix="%"
                                                       readonly>
                                            </td>
                                            <td class="border-primary border">
                                                <input type="text"
                                                       class="form-control h2 mb-0 font-weight-bold"
                                                       style="font-size: 20px"
                                                       id="solucao_idade_Desempenho"
                                                       name="solucao_idade_Desempenho"
                                                       [ngModel]="planner.planejamentoAgregandoValor!.idade_Desempenho"
                                                       mask="separator.2"
                                                       thousandSeparator="."
                                                       decimalMarker=","
                                                       readonly>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Patrimônio por Idade -->
                    <div class="form-row mb-2" *ngIf="planner.planejamentoGrafico.length > 0">
                        <app-patrimonio-por-idade style="width: 100%" [planner]="planner"></app-patrimonio-por-idade>
                    </div>
                    <!-- Comparativo Investimento x Produto -->
                    <div class="form-row mb-2" *ngIf="planner.planejamentoProduto.length > 0 || planner.planejamentoInvestimento.length > 0">
                        <app-grafico-comparativo style="width: 100%" #investimentoGraficos [planner]="planner"></app-grafico-comparativo>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>